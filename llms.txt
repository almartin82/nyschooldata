# nyschooldata

**Docs: <https://almartin82.github.io/nyschooldata/>**

Fetch and analyze New York State school enrollment data from
[NYSED](https://data.nysed.gov/) in R or Python.

## What can you find with nyschooldata?

**47 years of enrollment data** (1977-2024). 4,700+ schools. 700+
districts. 62 counties. Here are the stories hiding in the numbers.

``` r
library(nyschooldata)
library(dplyr)
```

------------------------------------------------------------------------

### The Long View: A Generation of Decline (1977-2024)

New York had **3.3 million students in 1977**. Today: **2.4 million**.
That’s 895,000 students—gone.

``` r
fetch_enr_years(c(1977, 1990, 2000, 2010, 2024), level = "district") %>%
  filter(grade_level == "TOTAL") %>%
  group_by(end_year) %>%
  summarize(total = sum(n_students, na.rm = TRUE))
#>   end_year   total
#> 1     1977 3299863
#> 2     1990 2509928
#> 3     2000 2864473
#> 4     2010 2702000
#> 5     2024 2404319
```

------------------------------------------------------------------------

### The Millennial Plateau (2000-2012)

The early 2000s saw remarkable stability. Enrollment hovered around
2.7-2.8M for a decade before the decline accelerated.

``` r
fetch_enr_years(2000:2012, level = "district") %>%
  filter(grade_level == "TOTAL") %>%
  group_by(end_year) %>%
  summarize(total = sum(n_students, na.rm = TRUE))
```

------------------------------------------------------------------------

### The Modern Decline (2012-2024)

**-295,521 students (-11%)** in just 12 years. The decline accelerated
in the 2010s.

``` r
fetch_enr_years(2012:2024, level = "district") %>%
  filter(grade_level == "TOTAL") %>%
  group_by(end_year) %>%
  summarize(total = sum(n_students, na.rm = TRUE))
```

![Statewide enrollment
decline](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/statewide-trend-1.png)

Statewide enrollment decline

------------------------------------------------------------------------

### The COVID Cliff (2019-2024)

**2021 lost 106,560 students in a single year** (-4.2%)—the largest drop
ever recorded. But 2024 shows signs of stabilization (+388 students).

``` r
fetch_enr_years(2019:2024, level = "district") %>%
  filter(grade_level == "TOTAL") %>%
  group_by(end_year) %>%
  summarize(total = sum(n_students, na.rm = TRUE)) %>%
  mutate(change = total - lag(total))
#>   end_year   total  change
#> 1     2019 2577890      NA
#> 2     2020 2561821  -16069
#> 3     2021 2455261 -106560  <- COVID cliff
#> 4     2022 2418631  -36630
#> 5     2023 2403931  -14700
#> 6     2024 2404319    +388  <- first positive year
```

![Year-over-year
changes](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/covid-impact-1.png)

Year-over-year changes

------------------------------------------------------------------------

### Grade-Level Analysis: Where Are We Losing Students?

**Grade 1 fell 17%** since 2012—the pipeline is shrinking. But Pre-K
exploded.

``` r
# Compare grade levels
fetch_enr_years(c(2012, 2024), level = "district") %>%
  filter(grade_level %in% c("PK_FULL", "K", "01", "05", "09", "12")) %>%
  group_by(end_year, grade_level) %>%
  summarize(total = sum(n_students, na.rm = TRUE)) %>%
  pivot_wider(names_from = end_year, values_from = total)
#>   grade_level  `2012`  `2024`  change
#> 1 PK_FULL      27885  157116  +463%
#> 2 K           188512  166897   -11%
#> 3 01          193366  159723   -17%
#> 4 05          196429  168488   -14%
#> 5 09          208901  176893   -15%
#> 6 12          176789  171553    -3%
```

![Grade-level
changes](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/grade-change-1.png)

Grade-level changes

------------------------------------------------------------------------

### The Pre-K Revolution (2012-2024)

Full-day Pre-K grew **463%**—from 28K to 157K. NYC’s Universal Pre-K
launched in 2014 and drove a 115% jump in 2015.

``` r
fetch_enr_years(2012:2024, level = "district") %>%
  filter(grade_level %in% c("PK_FULL", "PK_HALF")) %>%
  group_by(end_year, grade_level) %>%
  summarize(total = sum(n_students, na.rm = TRUE))
```

![Pre-K
growth](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/prek-growth-1.png)

Pre-K growth

------------------------------------------------------------------------

### NYC vs Rest of State

NYC is **99% full-day Pre-K**. The rest of the state? Only 85%.

``` r
fetch_enr(2024, level = "district") %>%
  filter(grade_level %in% c("PK_FULL", "PK_HALF")) %>%
  group_by(is_nyc, grade_level) %>%
  summarize(total = sum(n_students, na.rm = TRUE)) %>%
  pivot_wider(names_from = grade_level, values_from = total) %>%
  mutate(pct_full = PK_FULL / (PK_FULL + PK_HALF) * 100)
#>   is_nyc PK_FULL PK_HALF pct_full
#> 1 FALSE   53749    9416     85%
#> 2 TRUE   103367     865     99%
```

![Pre-K full-day
comparison](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/prek-fullday-1.png)

Pre-K full-day comparison

------------------------------------------------------------------------

### NYC Special Education: District 75 (2012-2024)

While NYC geographic districts shrank, **District 75 grew 40%**. NYC’s
citywide special education program is one of the few growth areas.

``` r
fetch_enr_nyc(c(2012, 2024)) %>%
  filter(grade_level == "TOTAL", is_district) %>%
  filter(grepl("DIST 75|GEOG DIST", district_name)) %>%
  group_by(end_year, district_name) %>%
  summarize(total = sum(n_students))
```

![District 75
growth](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/district75-1.png)

District 75 growth

------------------------------------------------------------------------

### County Analysis: Winners and Losers (2012-2024)

**Only Saratoga County grew** (+0.3%). The Bronx lost 24%—the worst
decline among major counties.

``` r
fetch_enr_years(c(2012, 2024), level = "district") %>%
  filter(grade_level == "TOTAL") %>%
  group_by(end_year, county) %>%
  summarize(total = sum(n_students, na.rm = TRUE)) %>%
  pivot_wider(names_from = end_year, values_from = total) %>%
  mutate(pct_change = (`2024` - `2012`) / `2012` * 100) %>%
  arrange(pct_change)
#> Top decliners:
#> BRONX:       -23.7%
#> SCHENECTADY: -18.7%
#> CHEMUNG:     -17.5%
#> ...
#> Only grower:
#> SARATOGA:    +0.3%
```

![County
changes](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/county-change-1.png)

County changes

------------------------------------------------------------------------

### Charter School Growth (2023-2024)

**181,000 students (7.3%)** now attend charter schools across 343
schools.

``` r
fetch_enr(2024, level = "school") %>%
  filter(grade_level == "TOTAL", is_school) %>%
  group_by(is_charter) %>%
  summarize(
    students = sum(n_students, na.rm = TRUE),
    schools = n()
  )
#>   is_charter students schools
#> 1 FALSE      2307920    4406
#> 2 TRUE        181334     343
```

------------------------------------------------------------------------

### Major District Trends (2012-2024)

Rochester lost **30%**—the steepest decline among major districts.

``` r
# Top 5 districts by 2012 enrollment
fetch_enr_years(c(2012, 2024), level = "district") %>%
  filter(grade_level == "TOTAL") %>%
  group_by(end_year, district_name) %>%
  summarize(total = sum(n_students)) %>%
  pivot_wider(names_from = end_year, values_from = total) %>%
  filter(`2012` > 20000) %>%
  mutate(pct = (`2024` - `2012`) / `2012` * 100) %>%
  arrange(pct)
```

![Major district
declines](https://almartin82.github.io/nyschooldata/articles/district-hooks_files/figure-html/major-districts-1.png)

Major district declines

------------------------------------------------------------------------

### Kindergarten: Half-Day vs Full-Day (2012-2024)

Full-day K is now dominant. Half-day K collapsed from 35K to 8K
students.

``` r
fetch_enr_years(c(2012, 2018, 2024), level = "district") %>%
  filter(grade_level %in% c("K_HALF", "K_FULL")) %>%
  group_by(end_year, grade_level) %>%
  summarize(total = sum(n_students, na.rm = TRUE))
#>   end_year grade_level  total
#> 1     2012 K_FULL      153125
#> 2     2012 K_HALF       35387
#> 3     2024 K_FULL      158575
#> 4     2024 K_HALF        8322
```

------------------------------------------------------------------------

### Individual School Lookup

Get any school’s enrollment by BEDS code:

``` r
# Albany High School
fetch_enr_school("010100010023", 2020:2024) %>%
  filter(grade_level == "TOTAL")
```

------------------------------------------------------------------------

### Individual District Lookup

Get all schools in a district:

``` r
# Rochester City SD
fetch_enr_district("261600", 2024, level = "school") %>%
  filter(grade_level == "TOTAL", is_school) %>%
  arrange(desc(n_students))
```

------------------------------------------------------------------------

## Installation

``` r
# install.packages("remotes")
remotes::install_github("almartin82/nyschooldata")
```

## Quick Start

### R

``` r
library(nyschooldata)
library(dplyr)

# Fetch 2024 data (2023-24 school year)
enr <- fetch_enr(2024)

# Statewide total
enr %>%
  filter(is_district, grade_level == "TOTAL") %>%
  summarize(total = sum(n_students, na.rm = TRUE))
#> 2,404,319 students
```

### Python

``` python
import pynyschooldata as ny

# Fetch 2024 data (2023-24 school year)
enr = ny.fetch_enr(2024)

# Statewide total
total = enr[enr['is_district'] & (enr['grade_level'] == 'TOTAL')]['n_students'].sum()
print(f"{total:,} students")
#> 2,404,319 students

# Get multiple years
enr_multi = ny.fetch_enr_multi([2020, 2021, 2022, 2023, 2024])

# Check available years
years = ny.get_available_years()
print(f"Data available: {years['min_year']}-{years['max_year']}")
#> Data available: 1977-2024
```

## Data Availability & Format

### Coverage by Era

| Era            | Years     | What’s Available                                     |
|----------------|-----------|------------------------------------------------------|
| **Archive I**  | 1977-1993 | K-12 enrollment by grade, district & school level    |
| **Archive II** | 1994-2011 | \+ Pre-K, + Gender breakdowns                        |
| **Modern**     | 2012-2021 | \+ Econ Disadvantaged, ELL, Students w/ Disabilities |
| **Current**    | 2022-2024 | Same as Modern, updated file format                  |

### Grade Levels

All years include: **K, 1-12, Ungraded Elementary, Ungraded Secondary**

Pre-K breakdown (1995+): `PK_HALF`, `PK_FULL`

Kindergarten breakdown: `K_HALF`, `K_FULL`

### Geographic Hierarchy

    State (1)
    └── County (62)
        └── District (~730)
            └── School (~4,700)

### Identifiers

- **BEDS Code**: 12-digit unique school identifier (e.g.,
  `010100010023`)
  - Digits 1-6: District code
  - Digits 7-10: School code
  - Digits 11-12: Check digits
- **District Code**: 6-digit district identifier (e.g., `010100` =
  Albany City SD)

### Flags

| Flag          | Description                                   |
|---------------|-----------------------------------------------|
| `is_district` | District-level aggregate row                  |
| `is_school`   | Individual school record                      |
| `is_nyc`      | NYC DOE school/district (codes 30xxxx-35xxxx) |
| `is_charter`  | Charter school                                |

### Data Source

All data comes from [NYSED Information Reporting
Services](https://www.p12.nysed.gov/irs/statistics/enroll-n-staff/home.html).
Files are downloaded, cached locally, and standardized into a consistent
schema.

### Caveats

- **Suppression**: Small cell sizes may be suppressed (shown as NA)
- **Charter schools**: Charter flag requires school-level data (2012+)
- **Historical comparisons**: Pre-K wasn’t tracked before 1995; use K-12
  totals for long-term trends
- **NYC structure**: NYC has 32 geographic districts + District 75
  (special ed) + District 79 (alternative)

## Key Functions

| Function                                                                                              | Description                 |
|-------------------------------------------------------------------------------------------------------|-----------------------------|
| `fetch_enr(year)`                                                                                     | Get enrollment for one year |
| `fetch_enr_years(years)`                                                                              | Get multiple years          |
| `fetch_enr_school(beds, year)`                                                                        | Get specific school         |
| `fetch_enr_district(code, year)`                                                                      | Get specific district       |
| `fetch_enr_nyc(year)`                                                                                 | Get NYC schools only        |
| [`get_available_years()`](https://almartin82.github.io/nyschooldata/reference/get_available_years.md) | Check year range            |

## Documentation

- [Full Analysis with
  Charts](https://almartin82.github.io/nyschooldata/articles/district-hooks.html)
- [Getting Started
  Guide](https://almartin82.github.io/nyschooldata/articles/quickstart.html)
- [API Reference](https://almartin82.github.io/nyschooldata/reference/)

## Part of the State Schooldata Project

A simple, consistent interface for accessing state-published school data
in Python and R.

**All 50 state packages:**
[github.com/almartin82](https://github.com/almartin82?tab=repositories&q=schooldata)

## Author

[Andy Martin](https://github.com/almartin82) (<almartin@gmail.com>)

# Package index

## Fetch Data

Download enrollment data from NYSED

- [`fetch_enr()`](https://almartin82.github.io/nyschooldata/reference/fetch_enr.md)
  : Fetch New York enrollment data
- [`fetch_enr_multi()`](https://almartin82.github.io/nyschooldata/reference/fetch_enr_multi.md)
  : Fetch enrollment data for multiple years
- [`fetch_enr_years()`](https://almartin82.github.io/nyschooldata/reference/fetch_enr_years.md)
  : Fetch enrollment data for multiple years (legacy)
- [`fetch_enr_school()`](https://almartin82.github.io/nyschooldata/reference/fetch_enr_school.md)
  : Get enrollment for a specific school by BEDS code
- [`fetch_enr_district()`](https://almartin82.github.io/nyschooldata/reference/fetch_enr_district.md)
  : Get enrollment for a specific district
- [`fetch_enr_nyc()`](https://almartin82.github.io/nyschooldata/reference/fetch_enr_nyc.md)
  : Get NYC enrollment data

## Process & Tidy

Transform data into analysis-ready formats

- [`tidy_enr()`](https://almartin82.github.io/nyschooldata/reference/tidy_enr.md)
  : Tidy enrollment data
- [`id_enr_aggs()`](https://almartin82.github.io/nyschooldata/reference/id_enr_aggs.md)
  : Identify enrollment aggregation levels
- [`enr_grade_aggs()`](https://almartin82.github.io/nyschooldata/reference/enr_grade_aggs.md)
  : Custom Enrollment Grade Level Aggregates
- [`filter_grade_span()`](https://almartin82.github.io/nyschooldata/reference/filter_grade_span.md)
  : Filter enrollment data by grade span

## Cache Management

Manage locally cached data

- [`cache_status()`](https://almartin82.github.io/nyschooldata/reference/cache_status.md)
  : Show cache status
- [`clear_enr_cache()`](https://almartin82.github.io/nyschooldata/reference/clear_enr_cache.md)
  : Clear the nyschooldata cache

## Utilities

Helper functions for working with NY school data

- [`school_year_label()`](https://almartin82.github.io/nyschooldata/reference/school_year_label.md)
  : School Year Label
- [`parse_school_year()`](https://almartin82.github.io/nyschooldata/reference/parse_school_year.md)
  : Parse School Year Label
- [`get_available_years()`](https://almartin82.github.io/nyschooldata/reference/get_available_years.md)
  : Get Available Years
- [`validate_beds_code()`](https://almartin82.github.io/nyschooldata/reference/validate_beds_code.md)
  : Validate BEDS code format
- [`parse_beds_code()`](https://almartin82.github.io/nyschooldata/reference/parse_beds_code.md)
  : Parse BEDS code into components

# Articles

### Explore the Data

- [10 Surprising Findings in NY School
  Enrollment](https://almartin82.github.io/nyschooldata/articles/district-hooks.md):

### Reference

- [Getting Started with
  nyschooldata](https://almartin82.github.io/nyschooldata/articles/quickstart.md):
- [Data Quality QA: NY School
  Enrollment](https://almartin82.github.io/nyschooldata/articles/data-quality-qa.md):
