[{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/CLAUDE.html","id":"git-commits-and-prs","dir":"","previous_headings":"","what":"Git Commits and PRs","title":"Claude Code Instructions","text":"NEVER reference Claude, Claude Code, AI assistance commit messages NEVER reference Claude, Claude Code, AI assistance PR descriptions NEVER add Co-Authored-lines mentioning Claude Anthropic Keep commit messages focused changed, written","code":""},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Data Quality QA: NY School Enrollment","text":"vignette performs data quality checks New York State school enrollment data 2012-2024. examine: Statewide enrollment trends (noting year--year changes > 5%) District-level analysis 5 major districts Data completeness anomalies","code":"library(nyschooldata) library(dplyr) library(ggplot2) library(scales)"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"fetch-multi-year-data","dir":"Articles","previous_headings":"","what":"Fetch Multi-Year Data","title":"Data Quality QA: NY School Enrollment","text":"retrieve enrollment data available years (2012-2024).","code":"# Fetch district-level data for all available years years <- 2012:2024  # Get enrollment data year by year (handles errors gracefully) enr_all <- fetch_enr_years(years, level = \"district\", tidy = TRUE) ## Downloading district enrollment data for 2012 ... ## Cached data for 2012 ## Downloading district enrollment data for 2013 ... ## Cached data for 2013 ## Downloading district enrollment data for 2014 ... ## Cached data for 2014 ## Downloading district enrollment data for 2015 ... ## Cached data for 2015 ## Downloading district enrollment data for 2016 ... ## Cached data for 2016 ## Downloading district enrollment data for 2017 ... ## Cached data for 2017 ## Downloading district enrollment data for 2018 ... ## Cached data for 2018 ## Downloading district enrollment data for 2019 ... ## Cached data for 2019 ## Downloading district enrollment data for 2020 ... ## Cached data for 2020 ## Downloading district enrollment data for 2021 ... ## Cached data for 2021 ## Downloading district enrollment data for 2022 ... ## Cached data for 2022 ## Downloading district enrollment data for 2023 ... ## Cached data for 2023 ## Downloading district enrollment data for 2024 ... ## Cached data for 2024 # Check what years we actually got years_retrieved <- sort(unique(enr_all$end_year)) message(\"Years retrieved: \", paste(years_retrieved, collapse = \", \")) ## Years retrieved: 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"total-state-enrollment-by-year","dir":"Articles","previous_headings":"Statewide Enrollment Trends","what":"Total State Enrollment by Year","title":"Data Quality QA: NY School Enrollment","text":"","code":"state_totals <- enr_all %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(     total_enrollment = sum(n_students, na.rm = TRUE),     n_districts = n_distinct(district_code),     .groups = \"drop\"   ) %>%   arrange(end_year) %>%   mutate(     yoy_change = total_enrollment - lag(total_enrollment),     yoy_pct = yoy_change / lag(total_enrollment) * 100,     flag_large_change = abs(yoy_pct) > 5   )  state_totals ## # A tibble: 13 × 6 ##    end_year total_enrollment n_districts yoy_change yoy_pct flag_large_change ##       <int>            <dbl>       <int>      <dbl>   <dbl> <lgl>             ##  1     2012          2699840           1         NA NA      NA                ##  2     2013          2680170           1     -19670 -0.729  FALSE             ##  3     2014          2661609           1     -18561 -0.693  FALSE             ##  4     2015          2655264           1      -6345 -0.238  FALSE             ##  5     2016          2642186           1     -13078 -0.493  FALSE             ##  6     2017          2623867           1     -18319 -0.693  FALSE             ##  7     2018          2607282           1     -16585 -0.632  FALSE             ##  8     2019          2577890           1     -29392 -1.13   FALSE             ##  9     2020          2561821           1     -16069 -0.623  FALSE             ## 10     2021          2455261           1    -106560 -4.16   FALSE             ## 11     2022          2418631           1     -36630 -1.49   FALSE             ## 12     2023          2403931         718     -14700 -0.608  FALSE             ## 13     2024          2404319         718        388  0.0161 FALSE"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"identify-large-year-over-year-changes","dir":"Articles","previous_headings":"Statewide Enrollment Trends","what":"Identify Large Year-Over-Year Changes","title":"Data Quality QA: NY School Enrollment","text":"Changes greater 5% warrant investigation:","code":"large_changes <- state_totals %>%   filter(flag_large_change == TRUE)  if (nrow(large_changes) > 0) {   message(\"WARNING: Found \", nrow(large_changes), \" year(s) with >5% enrollment change:\")   print(large_changes %>% select(end_year, total_enrollment, yoy_pct)) } else {   message(\"No year-over-year changes exceeded 5% threshold\") } ## No year-over-year changes exceeded 5% threshold"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"statewide-trend-visualization","dir":"Articles","previous_headings":"Statewide Enrollment Trends","what":"Statewide Trend Visualization","title":"Data Quality QA: NY School Enrollment","text":"NY State Total Public School Enrollment","code":"ggplot(state_totals, aes(x = end_year, y = total_enrollment)) +   geom_line(linewidth = 1, color = \"steelblue\") +   geom_point(size = 2.5, color = \"steelblue\") +   geom_point(     data = state_totals %>% filter(flag_large_change),     aes(x = end_year, y = total_enrollment),     color = \"red\", size = 4   ) +   scale_y_continuous(labels = comma, limits = c(0, NA)) +   scale_x_continuous(breaks = years_retrieved) +   labs(     title = \"New York State Total Public School Enrollment\",     subtitle = \"Red points indicate >5% year-over-year change\",     x = \"School Year (End Year)\",     y = \"Total Enrollment\",     caption = \"Source: NYSED IRS Public School Enrollment\"   ) +   theme_minimal() +   theme(     axis.text.x = element_text(angle = 45, hjust = 1),     plot.title = element_text(face = \"bold\")   )"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"year-over-year-percentage-change","dir":"Articles","previous_headings":"Statewide Enrollment Trends","what":"Year-Over-Year Percentage Change","title":"Data Quality QA: NY School Enrollment","text":"Year--year percentage change enrollment","code":"ggplot(   state_totals %>% filter(!is.na(yoy_pct)),   aes(x = end_year, y = yoy_pct) ) +   geom_col(     aes(fill = yoy_pct > 0),     show.legend = FALSE   ) +   geom_hline(yintercept = c(-5, 5), linetype = \"dashed\", color = \"red\") +   scale_fill_manual(values = c(\"TRUE\" = \"steelblue\", \"FALSE\" = \"coral\")) +   scale_x_continuous(breaks = years_retrieved[-1]) +   labs(     title = \"Year-Over-Year Enrollment Change (%)\",     subtitle = \"Dashed lines show +/- 5% threshold\",     x = \"School Year (End Year)\",     y = \"Percentage Change\"   ) +   theme_minimal() +   theme(axis.text.x = element_text(angle = 45, hjust = 1))"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"major-district-analysis","dir":"Articles","previous_headings":"","what":"Major District Analysis","title":"Data Quality QA: NY School Enrollment","text":"examine 5 major NY districts: NYC DOE - New York City Department Education (district code starting “31”) Buffalo City SD - Second largest district Rochester City SD - Third largest district Yonkers Public Schools - Fourth largest district Syracuse City SD - Fifth largest district","code":"# Major district codes (first 6 digits of BEDS code) major_districts <- tribble(   ~district_code, ~district_label,   \"310200\", \"NYC DOE\",   \"140600\", \"Buffalo City SD\",   \"261600\", \"Rochester City SD\",   \"662300\", \"Yonkers Public Schools\",   \"421800\", \"Syracuse City SD\" )  # Note: NYC has multiple district_code prefixes (31xxxx) # Let's identify the actual codes in our data  # Find NYC districts nyc_districts <- enr_all %>%   filter(is_nyc, grade_level == \"TOTAL\") %>%   distinct(district_code, district_name) %>%   head(5)  message(\"NYC district codes found:\") ## NYC district codes found: print(nyc_districts) ##   district_code                 district_name ## 1        307500    NYC SPEC SCHOOLS - DIST 75 ## 2        310100 NYC GEOG DIST # 1 - MANHATTAN ## 3        310200 NYC GEOG DIST # 2 - MANHATTAN ## 4        310300 NYC GEOG DIST # 3 - MANHATTAN ## 5        310400 NYC GEOG DIST # 4 - MANHATTAN # Find other major districts by name all_districts <- enr_all %>%   filter(grade_level == \"TOTAL\") %>%   distinct(district_code, district_name)  # Search for our target districts buffalo <- all_districts %>% filter(grepl(\"BUFFALO\", toupper(district_name))) rochester <- all_districts %>% filter(grepl(\"ROCHESTER\", toupper(district_name))) yonkers <- all_districts %>% filter(grepl(\"YONKERS\", toupper(district_name))) syracuse <- all_districts %>% filter(grepl(\"SYRACUSE\", toupper(district_name)))  message(\"\\nDistrict codes found:\") ##  ## District codes found: message(\"Buffalo: \", paste(buffalo$district_code, collapse = \", \")) ## Buffalo: NA, 140600 message(\"Rochester: \", paste(rochester$district_code, collapse = \", \")) ## Rochester: NA, NA, 261313, 261600 message(\"Yonkers: \", paste(yonkers$district_code, collapse = \", \")) ## Yonkers: NA, 662300 message(\"Syracuse: \", paste(syracuse$district_code, collapse = \", \")) ## Syracuse: NA, NA, NA, 420303, 420401, 421800"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"district-level-enrollment-trends","dir":"Articles","previous_headings":"Major District Analysis","what":"District-Level Enrollment Trends","title":"Data Quality QA: NY School Enrollment","text":"","code":"# Combine district codes for filtering # NYC is special - aggregate all 31xxxx districts target_districts <- c(   buffalo$district_code[1],   rochester$district_code[1],   yonkers$district_code[1],   syracuse$district_code[1] )  # Get NYC aggregate nyc_trend <- enr_all %>%   filter(is_nyc, grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(     n_students = sum(n_students, na.rm = TRUE),     .groups = \"drop\"   ) %>%   mutate(district_label = \"NYC DOE\")  # Get other major districts other_trends <- enr_all %>%   filter(     district_code %in% target_districts,     grade_level == \"TOTAL\"   ) %>%   select(end_year, district_name, n_students) %>%   mutate(district_label = case_when(     grepl(\"BUFFALO\", toupper(district_name)) ~ \"Buffalo City SD\",     grepl(\"ROCHESTER\", toupper(district_name)) ~ \"Rochester City SD\",     grepl(\"YONKERS\", toupper(district_name)) ~ \"Yonkers Public Schools\",     grepl(\"SYRACUSE\", toupper(district_name)) ~ \"Syracuse City SD\",     TRUE ~ district_name   )) %>%   select(end_year, district_label, n_students)  # Combine district_trends <- bind_rows(nyc_trend, other_trends)  district_trends ## # A tibble: 7,932 × 3 ##    end_year n_students district_label    ##       <int>      <dbl> <chr>             ##  1     2023     895097 NYC DOE           ##  2     2024     898410 NYC DOE           ##  3     2012       8495 ALBANY            ##  4     2012        927 BERNE KNOX        ##  5     2012       4936 BETHLEHEM         ##  6     2012       2036 RAVENA COEYMANS   ##  7     2012       1972 COHOES            ##  8     2012       5231 SOUTH COLONIE     ##  9     2012        256 MENANDS           ## 10     2012       5512 NORTH COLONIE CSD ## # ℹ 7,922 more rows"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"district-enrollment-visualization","dir":"Articles","previous_headings":"Major District Analysis","what":"District Enrollment Visualization","title":"Data Quality QA: NY School Enrollment","text":"Major district enrollment trends","code":"# Calculate YoY changes by district district_yoy <- district_trends %>%   arrange(district_label, end_year) %>%   group_by(district_label) %>%   mutate(     yoy_pct = (n_students - lag(n_students)) / lag(n_students) * 100,     flag_change = abs(yoy_pct) > 5   ) %>%   ungroup()  # Plot ggplot(district_yoy, aes(x = end_year, y = n_students, color = district_label)) +   geom_line(linewidth = 1) +   geom_point(size = 2) +   geom_point(     data = district_yoy %>% filter(flag_change == TRUE),     size = 4, shape = 1, stroke = 1.5   ) +   scale_y_continuous(labels = comma) +   scale_x_continuous(breaks = years_retrieved) +   scale_color_brewer(palette = \"Set1\") +   labs(     title = \"Enrollment Trends: Major NY Districts\",     subtitle = \"Circled points indicate >5% year-over-year change\",     x = \"School Year (End Year)\",     y = \"Total Enrollment\",     color = \"District\",     caption = \"Source: NYSED IRS Public School Enrollment\"   ) +   theme_minimal() +   theme(     axis.text.x = element_text(angle = 45, hjust = 1),     legend.position = \"bottom\"   ) +   guides(color = guide_legend(nrow = 2)) ## Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set1 is 9 ## Returning the palette you asked for with that many colors ## Warning: Removed 7851 rows containing missing values or values outside the scale range ## (`geom_line()`). ## Warning: Removed 7851 rows containing missing values or values outside the scale range ## (`geom_point()`). ## Warning: Removed 1528 rows containing missing values or values outside the scale range ## (`geom_point()`)."},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"district-level-large-changes","dir":"Articles","previous_headings":"Major District Analysis","what":"District-Level Large Changes","title":"Data Quality QA: NY School Enrollment","text":"","code":"district_flags <- district_yoy %>%   filter(flag_change == TRUE) %>%   arrange(district_label, end_year) %>%   select(district_label, end_year, n_students, yoy_pct)  if (nrow(district_flags) > 0) {   message(\"Districts with >5% YoY changes:\")   print(district_flags) } else {   message(\"No major districts had >5% year-over-year changes\") } ## Districts with >5% YoY changes: ## # A tibble: 1,537 × 4 ##    district_label end_year n_students yoy_pct ##    <chr>             <int>      <dbl>   <dbl> ##  1 AFTON              2017        513   -5.70 ##  2 AFTON              2021        481   -7.85 ##  3 AKRON              2021       1282   -7.50 ##  4 ALBANY             2016       9625    6.00 ##  5 ALBANY             2021       8853   -7.28 ##  6 ALBION             2021       1783   -5.01 ##  7 ALDEN              2021       1527   -6.43 ##  8 ALEXANDER          2013        879   -5.89 ##  9 ALEXANDER          2021        759   -7.66 ## 10 ALEXANDRIA CSD     2015        574   -7.27 ## # ℹ 1,527 more rows"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"district-enrollment-table","dir":"Articles","previous_headings":"Major District Analysis","what":"District Enrollment Table","title":"Data Quality QA: NY School Enrollment","text":"","code":"# Wide table of enrollment by district and year district_wide <- district_trends %>%   tidyr::pivot_wider(     names_from = end_year,     values_from = n_students   ) ## Warning: Values from `n_students` are not uniquely identified; output will contain ## list-cols. ## • Use `values_fn = list` to suppress this warning. ## • Use `values_fn = {summary_fun}` to summarise duplicates. ## • Use the following dplyr code to identify duplicates. ##   {data} |> ##   dplyr::summarise(n = dplyr::n(), .by = c(district_label, end_year)) |> ##   dplyr::filter(n > 1L) district_wide ## # A tibble: 730 × 14 ##    district_label `2023` `2024` `2012` `2013` `2014` `2015` `2016` `2017` `2018` ##    <chr>          <list> <list> <list> <list> <list> <list> <list> <list> <list> ##  1 NYC DOE        <dbl>  <dbl>  <NULL> <NULL> <NULL> <NULL> <NULL> <NULL> <NULL> ##  2 ALBANY         <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  3 BERNE KNOX     <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  4 BETHLEHEM      <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  5 RAVENA COEYMA… <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  6 COHOES         <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  7 SOUTH COLONIE  <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  8 MENANDS        <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ##  9 NORTH COLONIE… <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ## 10 GREEN ISLAND   <NULL> <NULL> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  ## # ℹ 720 more rows ## # ℹ 4 more variables: `2019` <list>, `2020` <list>, `2021` <list>, ## #   `2022` <list>"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"missing-data-by-year","dir":"Articles","previous_headings":"Data Completeness Checks","what":"Missing Data by Year","title":"Data Quality QA: NY School Enrollment","text":"","code":"missing_summary <- enr_all %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(     n_districts = n_distinct(district_code),     n_missing_enrollment = sum(is.na(n_students)),     pct_missing = n_missing_enrollment / n() * 100,     .groups = \"drop\"   )  missing_summary ## # A tibble: 13 × 4 ##    end_year n_districts n_missing_enrollment pct_missing ##       <int>       <int>                <int>       <dbl> ##  1     2012           1                    0           0 ##  2     2013           1                    0           0 ##  3     2014           1                    0           0 ##  4     2015           1                    0           0 ##  5     2016           1                    0           0 ##  6     2017           1                    0           0 ##  7     2018           1                    0           0 ##  8     2019           1                    0           0 ##  9     2020           1                    0           0 ## 10     2021           1                    0           0 ## 11     2022           1                    0           0 ## 12     2023         718                    0           0 ## 13     2024         718                    0           0"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"grade-level-data-availability","dir":"Articles","previous_headings":"Data Completeness Checks","what":"Grade-Level Data Availability","title":"Data Quality QA: NY School Enrollment","text":"Check grade levels available across years:","code":"grade_avail <- enr_all %>%   group_by(end_year, grade_level) %>%   summarize(     n_records = n(),     n_with_data = sum(!is.na(n_students)),     .groups = \"drop\"   ) %>%   filter(grade_level %in% c(\"TOTAL\", \"K\", \"01\", \"05\", \"09\", \"12\"))  tidyr::pivot_wider(   grade_avail,   id_cols = end_year,   names_from = grade_level,   values_from = n_with_data ) ## # A tibble: 13 × 7 ##    end_year  `01`  `05`  `09`  `12` TOTAL     K ##       <int> <int> <int> <int> <int> <int> <int> ##  1     2012   726   726   726   726   726    NA ##  2     2013   723   723   723   723   723    NA ##  3     2014   721   721   721   721   721    NA ##  4     2015   721   721   721   721   721    NA ##  5     2016   721   721   721   721   721    NA ##  6     2017   721   721   721   721   721    NA ##  7     2018   721   721   721   721   721    NA ##  8     2019   721   721   721   721   721    NA ##  9     2020   719   719   719   719   719    NA ## 10     2021   718   718   718   718   718    NA ## 11     2022   718   718   718   718   718    NA ## 12     2023   718   718   718   718   718   718 ## 13     2024   718   718   718   718   718   718"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"data-quality-issues-found","dir":"Articles","previous_headings":"","what":"Data Quality Issues Found","title":"Data Quality QA: NY School Enrollment","text":"Based analysis , document issues:","code":"issues <- list()  # Check for years with large statewide changes if (nrow(large_changes) > 0) {   issues$statewide_jumps <- large_changes$end_year }  # Check for district-level anomalies if (nrow(district_flags) > 0) {   issues$district_anomalies <- district_flags }  # Check for missing data high_missing <- missing_summary %>% filter(pct_missing > 1) if (nrow(high_missing) > 0) {   issues$high_missing_years <- high_missing$end_year }  # Print summary message(\"\\n=== DATA QUALITY SUMMARY ===\\n\") ##  ## === DATA QUALITY SUMMARY === if (length(issues) == 0) {   message(\"No significant data quality issues identified.\") } else {   if (!is.null(issues$statewide_jumps)) {     message(\"Statewide enrollment jumps (>5%) in years: \",             paste(issues$statewide_jumps, collapse = \", \"))   }   if (!is.null(issues$district_anomalies)) {     message(\"\\nDistrict-level anomalies:\")     print(issues$district_anomalies)   }   if (!is.null(issues$high_missing_years)) {     message(\"\\nYears with >1% missing data: \",             paste(issues$high_missing_years, collapse = \", \"))   } } ##  ## District-level anomalies: ## # A tibble: 1,537 × 4 ##    district_label end_year n_students yoy_pct ##    <chr>             <int>      <dbl>   <dbl> ##  1 AFTON              2017        513   -5.70 ##  2 AFTON              2021        481   -7.85 ##  3 AKRON              2021       1282   -7.50 ##  4 ALBANY             2016       9625    6.00 ##  5 ALBANY             2021       8853   -7.28 ##  6 ALBION             2021       1783   -5.01 ##  7 ALDEN              2021       1527   -6.43 ##  8 ALEXANDER          2013        879   -5.89 ##  9 ALEXANDER          2021        759   -7.66 ## 10 ALEXANDRIA CSD     2015        574   -7.27 ## # ℹ 1,527 more rows"},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"recommendations","dir":"Articles","previous_headings":"","what":"Recommendations","title":"Data Quality QA: NY School Enrollment","text":"Based QA analysis: Statewide trends: Review years flagged >5% changes determine represent genuine enrollment shifts data collection issues. District analysis: Major urban districts (NYC, Buffalo, Rochester, Yonkers, Syracuse) monitored unusual year--year changes. Data completeness: Years high missing data rates may need special handling analyses.","code":""},{"path":"https://almartin82.github.io/nyschooldata/articles/data-quality-qa.html","id":"session-info","dir":"Articles","previous_headings":"","what":"Session Info","title":"Data Quality QA: NY School Enrollment","text":"","code":"sessionInfo() ## R version 4.5.2 (2025-10-31) ## Platform: x86_64-pc-linux-gnu ## Running under: Ubuntu 24.04.3 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0 ##  ## locale: ##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        ##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    ##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           ## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats     graphics  grDevices utils     datasets  methods   base      ##  ## other attached packages: ## [1] scales_1.4.0       ggplot2_4.0.1      dplyr_1.1.4        nyschooldata_0.1.0 ##  ## loaded via a namespace (and not attached): ##  [1] gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.2     tidyselect_1.2.1   ##  [5] tidyr_1.3.2        jquerylib_0.1.4    systemfonts_1.3.1  textshaping_1.0.4  ##  [9] readxl_1.4.5       yaml_2.3.12        fastmap_1.2.0      R6_2.6.1           ## [13] labeling_0.4.3     generics_0.1.4     knitr_1.51         tibble_3.3.0       ## [17] desc_1.4.3         downloader_0.4.1   bslib_0.9.0        pillar_1.11.1      ## [21] RColorBrewer_1.1-3 rlang_1.1.6        utf8_1.2.6         cachem_1.1.0       ## [25] xfun_0.55          fs_1.6.6           sass_0.4.10        S7_0.2.1           ## [29] cli_3.6.5          pkgdown_2.2.0      withr_3.0.2        magrittr_2.0.4     ## [33] digest_0.6.39      grid_4.5.2         rappdirs_0.3.3     lifecycle_1.0.4    ## [37] vctrs_0.6.5        evaluate_1.0.5     glue_1.8.0         cellranger_1.1.0   ## [41] farver_2.1.2       codetools_0.2-20   ragg_1.5.0         purrr_1.2.0        ## [45] rmarkdown_2.30     tools_4.5.2        pkgconfig_2.0.3    htmltools_0.5.9"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"where-did-all-the-students-go","dir":"Articles","previous_headings":"","what":"Where Did All the Students Go?","title":"10 Surprising Findings in NY School Enrollment","text":"New York public schools lost 295,521 students since 2012 - ’s equivalent emptying Buffalo, Rochester, Syracuse, Yonkers combined. headline number hides complex story urban decline, Pre-K revolution, COVID disruption, surprising pockets growth. vignette explores 13 years enrollment data surface trends shaping New York’s educational landscape.","code":"library(nyschooldata) library(dplyr) library(ggplot2) library(scales) library(tidyr) # Fetch district-level data for all available years enr <- fetch_enr_years(2012:2024, level = \"district\", tidy = TRUE)"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"the-vanishing-300000","dir":"Articles","previous_headings":"","what":"1. The Vanishing 300,000","title":"10 Surprising Findings in NY School Enrollment","text":"New York lost 295,521 students (11%) 2012 2024 - equivalent losing every student Buffalo, Rochester, Syracuse, Yonkers combined.","code":"state_trend <- enr %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(total = sum(n_students, na.rm = TRUE), .groups = \"drop\")  # Calculate loss loss <- state_trend$total[state_trend$end_year == 2012] -         state_trend$total[state_trend$end_year == 2024]  ggplot(state_trend, aes(x = end_year, y = total)) +   geom_line(linewidth = 1.2, color = \"#2E86AB\") +   geom_point(size = 3, color = \"#2E86AB\") +   geom_hline(yintercept = state_trend$total[state_trend$end_year == 2024],              linetype = \"dashed\", color = \"darkred\", alpha = 0.5) +   annotate(\"text\", x = 2016, y = 2350000,            label = paste0(\"-\", comma(loss), \" students\\n(-11%)\"),            color = \"darkred\", size = 4, fontface = \"bold\") +   scale_y_continuous(labels = comma, limits = c(2200000, 2750000)) +   scale_x_continuous(breaks = 2012:2024) +   labs(     title = \"New York Lost 300,000 Students in 12 Years\",     subtitle = \"Total public school enrollment, 2012-2024\",     x = \"School Year (End Year)\",     y = \"Total Enrollment\",     caption = \"Source: NYSED IRS\"   ) +   theme_minimal() +   theme(     axis.text.x = element_text(angle = 45, hjust = 1),     plot.title = element_text(face = \"bold\", size = 14)   )"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"the-covid-cliff","dir":"Articles","previous_headings":"","what":"2. The COVID Cliff","title":"10 Surprising Findings in NY School Enrollment","text":"2021 saw unprecedented 4.2% single-year drop (106,560 students) - far largest decline recorded data. 2024 shows first positive year (+0.02%), suggesting possible stabilization.","code":"state_yoy <- state_trend %>%   mutate(     change = total - lag(total),     pct_change = round(change / lag(total) * 100, 2)   )  ggplot(state_yoy %>% filter(!is.na(pct_change)),        aes(x = end_year, y = pct_change, fill = pct_change > 0)) +   geom_col(show.legend = FALSE) +   geom_hline(yintercept = 0, color = \"black\") +   scale_fill_manual(values = c(\"TRUE\" = \"#28A745\", \"FALSE\" = \"#DC3545\")) +   scale_x_continuous(breaks = 2013:2024) +   labs(     title = \"The COVID Cliff: 2021's Unprecedented 4.2% Drop\",     subtitle = \"Year-over-year enrollment change (%)\",     x = \"School Year\",     y = \"Percent Change\",     caption = \"2024 shows first positive growth in the dataset\"   ) +   theme_minimal() +   theme(axis.text.x = element_text(angle = 45, hjust = 1))"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"the-pre-k-revolution","dir":"Articles","previous_headings":"","what":"3. The Pre-K Revolution","title":"10 Surprising Findings in NY School Enrollment","text":"Full-day Pre-K exploded 28K 157K - 463% increase. NYC’s Universal Pre-K program drove stunning 115% jump 2015 alone.","code":"pk_trend <- enr %>%   filter(grade_level == \"PK_FULL\") %>%   group_by(end_year) %>%   summarize(total = sum(n_students, na.rm = TRUE), .groups = \"drop\") %>%   mutate(     yoy_pct = round((total - lag(total)) / lag(total) * 100, 1)   )  ggplot(pk_trend, aes(x = end_year, y = total)) +   geom_area(fill = \"#17A2B8\", alpha = 0.3) +   geom_line(linewidth = 1.2, color = \"#17A2B8\") +   geom_point(size = 3, color = \"#17A2B8\") +   geom_vline(xintercept = 2015, linetype = \"dashed\", color = \"darkgreen\") +   annotate(\"text\", x = 2015.5, y = 100000,            label = \"NYC Universal Pre-K\\nlaunches (+115%)\",            hjust = 0, color = \"darkgreen\", size = 3.5) +   scale_y_continuous(labels = comma, limits = c(0, NA)) +   scale_x_continuous(breaks = 2012:2024) +   labs(     title = \"Full-Day Pre-K Grew 463% in 12 Years\",     subtitle = \"The most dramatic policy-driven enrollment shift in NY history\",     x = \"School Year\",     y = \"Full-Day Pre-K Enrollment\",     caption = \"Source: NYSED IRS\"   ) +   theme_minimal() +   theme(axis.text.x = element_text(angle = 45, hjust = 1))"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"the-bronx-exodus","dir":"Articles","previous_headings":"","what":"4. The Bronx Exodus","title":"10 Surprising Findings in NY School Enrollment","text":"Bronx lost 23.7% students - worst percentage decline among major counties, losing nearly 50,000 students.","code":"county_2012 <- enr %>% filter(end_year == 2012, grade_level == \"TOTAL\") %>%   group_by(county) %>% summarize(enr_2012 = sum(n_students, na.rm = TRUE), .groups = \"drop\") county_2024 <- enr %>% filter(end_year == 2024, grade_level == \"TOTAL\") %>%   group_by(county) %>% summarize(enr_2024 = sum(n_students, na.rm = TRUE), .groups = \"drop\")  county_change <- county_2012 %>%   inner_join(county_2024, by = \"county\") %>%   filter(enr_2012 > 10000) %>%  # Major counties only   mutate(     change = enr_2024 - enr_2012,     pct_change = round((enr_2024 - enr_2012) / enr_2012 * 100, 1)   ) %>%   arrange(pct_change)  # Show top 10 declining and top 5 growing county_display <- bind_rows(   county_change %>% head(10),   county_change %>% tail(5) ) %>%   mutate(county = factor(county, levels = county))  ggplot(county_display, aes(x = reorder(county, pct_change), y = pct_change,                            fill = pct_change > 0)) +   geom_col(show.legend = FALSE) +   geom_hline(yintercept = 0) +   coord_flip() +   scale_fill_manual(values = c(\"TRUE\" = \"#28A745\", \"FALSE\" = \"#DC3545\")) +   labs(     title = \"The Bronx Led the State in Enrollment Loss\",     subtitle = \"Percent change in enrollment, 2012-2024 (counties with >10K students)\",     x = NULL,     y = \"Percent Change\"   ) +   theme_minimal()"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"rochesters-collapse","dir":"Articles","previous_headings":"","what":"5. Rochester’s Collapse","title":"10 Surprising Findings in NY School Enrollment","text":"Rochester City SD lost 30% enrollment (32K 23K) - steepest decline among major urban districts.","code":"# Calculate 2012-2024 change by district dist_2012 <- enr %>% filter(end_year == 2012, grade_level == \"TOTAL\") %>%   select(district_name, county, enr_2012 = n_students) dist_2024 <- enr %>% filter(end_year == 2024, grade_level == \"TOTAL\") %>%   select(district_name, enr_2024 = n_students)  change <- dist_2012 %>%   inner_join(dist_2024, by = \"district_name\") %>%   filter(!is.na(enr_2012), !is.na(enr_2024), enr_2012 >= 10000) %>%   mutate(     change = enr_2024 - enr_2012,     pct_change = round((enr_2024 - enr_2012) / enr_2012 * 100, 1)   )  # Top decliners among big districts big_declines <- change %>%   arrange(pct_change) %>%   head(12) %>%   mutate(district_short = gsub(\" - .*\", \"\", district_name))  ggplot(big_declines, aes(x = reorder(district_short, pct_change), y = pct_change)) +   geom_col(fill = \"#DC3545\") +   geom_text(aes(label = paste0(pct_change, \"%\")), hjust = 1.1, color = \"white\", size = 3) +   coord_flip() +   labs(     title = \"Rochester Lost 30% - Worst Among Major Districts\",     subtitle = \"Districts with 10,000+ students in 2012\",     x = NULL,     y = \"Percent Change (2012-2024)\"   ) +   theme_minimal()"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"nycs-special-ed-surge","dir":"Articles","previous_headings":"","what":"6. NYC’s Special Ed Surge","title":"10 Surprising Findings in NY School Enrollment","text":"District 75 grew 40% nearly every NYC district shrank. NYC’s citywide special education district one gained students.","code":"# Find NYC District 75 nyc_districts <- change %>%   filter(grepl(\"NYC\", district_name)) %>%   mutate(     is_d75 = grepl(\"DIST 75\", district_name)   ) %>%   arrange(pct_change)  # Top 10 NYC district changes nyc_display <- bind_rows(   nyc_districts %>% filter(is_d75),  # Always show District 75   nyc_districts %>% filter(!is_d75) %>% head(5),  # Worst 5   nyc_districts %>% filter(!is_d75) %>% tail(3)   # Best 3 ) %>%   mutate(district_short = gsub(\"NYC GEOG DIST \", \"Dist \", district_name),          district_short = gsub(\"NYC SPEC SCHOOLS - \", \"\", district_short))  ggplot(nyc_display, aes(x = reorder(district_short, pct_change), y = pct_change,                         fill = pct_change > 0)) +   geom_col(show.legend = FALSE) +   geom_hline(yintercept = 0) +   coord_flip() +   scale_fill_manual(values = c(\"TRUE\" = \"#28A745\", \"FALSE\" = \"#DC3545\")) +   labs(     title = \"District 75 Bucked the Trend with 40% Growth\",     subtitle = \"NYC geographic district enrollment change, 2012-2024\",     x = NULL,     y = \"Percent Change\"   ) +   theme_minimal()"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"first-grade-cratering","dir":"Articles","previous_headings":"","what":"7. First Grade Cratering","title":"10 Surprising Findings in NY School Enrollment","text":"Grade 1 enrollment fell 17.4% - steepest decline grade level, reflecting birth rate drops family -migration.","code":"grade_totals <- enr %>%   filter(grade_level %in% c(\"K\", \"01\", \"05\", \"08\", \"09\", \"12\")) %>%   group_by(end_year, grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE), .groups = \"drop\")  g_2012 <- grade_totals %>% filter(end_year == 2012) %>% rename(n_2012 = total) g_2024 <- grade_totals %>% filter(end_year == 2024) %>% rename(n_2024 = total) %>%   select(grade_level, n_2024)  grade_change <- g_2012 %>%   inner_join(g_2024, by = \"grade_level\") %>%   mutate(     pct_change = round((n_2024 - n_2012) / n_2012 * 100, 1),     grade_label = case_when(       grade_level == \"01\" ~ \"Grade 1\",       grade_level == \"05\" ~ \"Grade 5\",       grade_level == \"08\" ~ \"Grade 8\",       grade_level == \"09\" ~ \"Grade 9\",       grade_level == \"12\" ~ \"Grade 12\",       grade_level == \"K\" ~ \"Kindergarten\"     )   )  ggplot(grade_change, aes(x = reorder(grade_label, pct_change), y = pct_change)) +   geom_col(fill = \"#6C757D\") +   geom_text(aes(label = paste0(pct_change, \"%\")), hjust = 1.1, color = \"white\", size = 4) +   coord_flip() +   labs(     title = \"First Grade Hit Hardest: -17.4%\",     subtitle = \"Enrollment change by grade level, 2012-2024\",     x = NULL,     y = \"Percent Change\"   ) +   theme_minimal()"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"charter-schools-rising-market-share","dir":"Articles","previous_headings":"","what":"8. Charter Schools’ Rising Market Share","title":"10 Surprising Findings in NY School Enrollment","text":"Charter schools now enroll ~181K students (7.5% total) across 343 schools, growing even traditional public school enrollment declines. Charter schools grew 175K 181K students one year","code":"# Need school-level data for charter information enr_schools <- fetch_enr_years(2023:2024, level = \"school\", tidy = TRUE) charter_summary <- enr_schools %>%   filter(grade_level == \"TOTAL\", is_school == TRUE) %>%   group_by(end_year, is_charter) %>%   summarize(     total = sum(n_students, na.rm = TRUE),     n_schools = n(),     .groups = \"drop\"   ) %>%   mutate(     type = ifelse(is_charter, \"Charter\", \"Traditional\"),     avg_size = round(total / n_schools)   )  # Show as table charter_summary %>%   select(end_year, type, total, n_schools, avg_size) %>%   arrange(end_year, desc(type)) %>%   knitr::kable(     col.names = c(\"Year\", \"School Type\", \"Total Students\", \"# Schools\", \"Avg Size\"),     format.args = list(big.mark = \",\"),     caption = \"Charter schools grew from 175K to 181K students in one year\"   )"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"only-one-county-grew","dir":"Articles","previous_headings":"","what":"9. Only One County Grew","title":"10 Surprising Findings in NY School Enrollment","text":"Saratoga County county GREW (+0.3%). Suburban counties held steady urban rural areas declined sharply. Growing County","code":"county_all <- county_2012 %>%   inner_join(county_2024, by = \"county\") %>%   mutate(     pct_change = round((enr_2024 - enr_2012) / enr_2012 * 100, 1),     grew = pct_change > 0   )  # Summary stats n_grew <- sum(county_all$grew) n_declined <- sum(!county_all$grew)  cat(paste0(\"Counties that grew: \", n_grew, \"\\n\")) ## Counties that grew: 1 cat(paste0(\"Counties that declined: \", n_declined, \"\\n\")) ## Counties that declined: 61 # The one county that grew county_all %>% filter(grew) %>%   select(county, enr_2012, enr_2024, pct_change) %>%   knitr::kable(caption = \"The Only Growing County\")"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"the-pre-k-inversion","dir":"Articles","previous_headings":"","what":"10. The Pre-K Inversion","title":"10 Surprising Findings in NY School Enrollment","text":"NYC Pre-K now 99% full-day (103K 104K), rest state 85% full-day. represents fundamental policy shift early childhood education.","code":"enr_2024 <- fetch_enr(2024, level = \"district\", tidy = TRUE)  pk_comparison <- enr_2024 %>%   filter(grade_level %in% c(\"PK_FULL\", \"PK_HALF\")) %>%   group_by(is_nyc, grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE), .groups = \"drop\") %>%   pivot_wider(names_from = grade_level, values_from = total) %>%   mutate(     region = ifelse(is_nyc, \"NYC\", \"Rest of NY\"),     total_pk = PK_FULL + PK_HALF,     pct_full_day = round(PK_FULL / total_pk * 100, 1)   )  ggplot(pk_comparison, aes(x = region, y = pct_full_day, fill = region)) +   geom_col(show.legend = FALSE, width = 0.6) +   geom_text(aes(label = paste0(pct_full_day, \"%\")), vjust = -0.5, size = 5, fontface = \"bold\") +   scale_fill_manual(values = c(\"NYC\" = \"#2E86AB\", \"Rest of NY\" = \"#A23B72\")) +   scale_y_continuous(limits = c(0, 110)) +   labs(     title = \"NYC Pre-K is Now 99% Full-Day\",     subtitle = \"Percentage of Pre-K students in full-day programs, 2024\",     x = NULL,     y = \"Percent Full-Day\"   ) +   theme_minimal() +   theme(     axis.text.x = element_text(size = 12, face = \"bold\"),     plot.title = element_text(face = \"bold\", size = 14)   )"},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"the-big-picture","dir":"Articles","previous_headings":"","what":"The Big Picture","title":"10 Surprising Findings in NY School Enrollment","text":"New York’s public school enrollment data reveals state profound transformation:","code":""},{"path":[]},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"what-does-this-mean","dir":"Articles","previous_headings":"The Big Picture","what":"What Does This Mean?","title":"10 Surprising Findings in NY School Enrollment","text":"patterns reflect three converging forces: Demographic decline: New York’s birth rate fallen sharply, especially urban areas. pipeline future students shrinking. Policy success: Universal Pre-K transformed early childhood education NYC. 463% growth full-day Pre-K one dramatic policy-driven enrollment shifts state history. COVID disruption: pandemic accelerated pre-existing trends may permanently altered family choices public vs. private schooling, remote work migration, urban living. 2024 data shows first positive year--year change (+0.02%), suggesting possible stabilization - Grade 1 enrollment still declining, long-term trajectory remains uncertain.","code":""},{"path":"https://almartin82.github.io/nyschooldata/articles/district-hooks.html","id":"session-info","dir":"Articles","previous_headings":"","what":"Session Info","title":"10 Surprising Findings in NY School Enrollment","text":"","code":"sessionInfo() ## R version 4.5.2 (2025-10-31) ## Platform: x86_64-pc-linux-gnu ## Running under: Ubuntu 24.04.3 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0 ##  ## locale: ##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        ##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    ##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           ## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats     graphics  grDevices utils     datasets  methods   base      ##  ## other attached packages: ## [1] tidyr_1.3.2        scales_1.4.0       ggplot2_4.0.1      dplyr_1.1.4        ## [5] nyschooldata_0.1.0 ##  ## loaded via a namespace (and not attached): ##  [1] gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.2     tidyselect_1.2.1   ##  [5] jquerylib_0.1.4    systemfonts_1.3.1  textshaping_1.0.4  readxl_1.4.5       ##  [9] yaml_2.3.12        fastmap_1.2.0      R6_2.6.1           labeling_0.4.3     ## [13] generics_0.1.4     knitr_1.51         tibble_3.3.0       desc_1.4.3         ## [17] downloader_0.4.1   bslib_0.9.0        pillar_1.11.1      RColorBrewer_1.1-3 ## [21] rlang_1.1.6        cachem_1.1.0       xfun_0.55          fs_1.6.6           ## [25] sass_0.4.10        S7_0.2.1           cli_3.6.5          pkgdown_2.2.0      ## [29] withr_3.0.2        magrittr_2.0.4     digest_0.6.39      grid_4.5.2         ## [33] rappdirs_0.3.3     lifecycle_1.0.4    vctrs_0.6.5        evaluate_1.0.5     ## [37] glue_1.8.0         cellranger_1.1.0   farver_2.1.2       codetools_0.2-20   ## [41] ragg_1.5.0         purrr_1.2.0        rmarkdown_2.30     tools_4.5.2        ## [45] pkgconfig_2.0.3    htmltools_0.5.9"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started with nyschooldata","text":"nyschooldata package provides easy access New York State public school enrollment data NYSED IRS (Information Reporting Services) database. vignette covers: Installation setup Fetching enrollment data Understanding data schema Filtering analyzing data Working BEDS codes Visualizing enrollment trends","code":""},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Getting Started with nyschooldata","text":"Install GitHub: Load package along commonly used analysis packages:","code":"# install.packages(\"remotes\") remotes::install_github(\"almartin82/nyschooldata\") library(nyschooldata) library(dplyr) library(ggplot2) library(scales)"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"basic-usage","dir":"Articles","previous_headings":"Fetching Enrollment Data","what":"Basic Usage","title":"Getting Started with nyschooldata","text":"main function fetch_enr(), downloads processes enrollment data given school year: end_year parameter refers end school year. example: - fetch_enr(2024) returns data 2023-24 school year - fetch_enr(2020) returns data 2019-20 school year","code":"# Fetch 2024 enrollment data (2023-24 school year) # Note: year refers to the END of the school year enr <- fetch_enr(2024)  head(enr)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"available-years","dir":"Articles","previous_headings":"Fetching Enrollment Data","what":"Available Years","title":"Getting Started with nyschooldata","text":"Data available 2012 (2011-12 school year) 2025 (2024-25 school year):","code":"get_available_years()"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"data-levels","dir":"Articles","previous_headings":"Fetching Enrollment Data","what":"Data Levels","title":"Getting Started with nyschooldata","text":"can fetch school-level district-level data:","code":"# School-level data (default) school_enr <- fetch_enr(2024, level = \"school\")  # District-level aggregates district_enr <- fetch_enr(2024, level = \"district\")"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"wide-vs--tidy-format","dir":"Articles","previous_headings":"Fetching Enrollment Data","what":"Wide vs. Tidy Format","title":"Getting Started with nyschooldata","text":"default, data returned tidy (long) format one row per school/grade combination: wide format one column per grade level:","code":"# Tidy format (default): one row per school per grade enr_tidy <- fetch_enr(2024, tidy = TRUE)  enr_tidy %>%   filter(is_school) %>%   select(school_name, grade_level, n_students) %>%   head(10) # Wide format: one row per school, columns for each grade enr_wide <- fetch_enr(2024, tidy = FALSE)  enr_wide %>%   filter(is_school) %>%   select(school_name, row_total, grade_pk, grade_k, grade_01, grade_09, grade_12) %>%   head(5)"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"key-columns","dir":"Articles","previous_headings":"Understanding the Data Schema","what":"Key Columns","title":"Getting Started with nyschooldata","text":"tidy format includes important columns:","code":""},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"aggregation-flags","dir":"Articles","previous_headings":"Understanding the Data Schema","what":"Aggregation Flags","title":"Getting Started with nyschooldata","text":"Boolean flags help filter right level data:","code":"# All districts districts <- enr %>% filter(is_district, grade_level == \"TOTAL\") nrow(districts)  # All schools schools <- enr %>% filter(is_school, grade_level == \"TOTAL\") nrow(schools)  # Only NYC schools nyc_schools <- enr %>% filter(is_school, is_nyc, grade_level == \"TOTAL\") nrow(nyc_schools)  # Only charter schools charters <- enr %>% filter(is_school, is_charter, grade_level == \"TOTAL\") nrow(charters)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"grade-level-values","dir":"Articles","previous_headings":"Understanding the Data Schema","what":"Grade Level Values","title":"Getting Started with nyschooldata","text":"tidy format, grade_level column contains: TOTAL - Total enrollment PK - Pre-Kindergarten (combined half full day) PK_HALF - Pre-K half day PK_FULL - Pre-K full day K - Kindergarten (combined) K_HALF - Kindergarten half day K_FULL - Kindergarten full day 01 12 - Grades 1-12 UG_ELEM - Ungraded elementary UG_SEC - Ungraded secondary","code":""},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"what-is-a-beds-code","dir":"Articles","previous_headings":"Working with BEDS Codes","what":"What is a BEDS Code?","title":"Getting Started with nyschooldata","text":"New York uses 12-digit BEDS (Basic Educational Data System) codes uniquely identify schools districts:","code":"DDDDDDSSSSCC │     │   │ │     │   └── Check digits (2) │     └────── School code (4) └──────────── District code (6)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"parsing-beds-codes","dir":"Articles","previous_headings":"Working with BEDS Codes","what":"Parsing BEDS Codes","title":"Getting Started with nyschooldata","text":"Use parse_beds_code() extract components:","code":"# Parse a BEDS code parse_beds_code(\"010100010018\") # Returns: #      beds_code district_code school_code check_digits # 1 010100010018        010100        0001           18  # Parse multiple codes beds_codes <- c(\"010100010018\", \"310200010001\", \"261600010001\") parse_beds_code(beds_codes)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"validating-beds-codes","dir":"Articles","previous_headings":"Working with BEDS Codes","what":"Validating BEDS Codes","title":"Getting Started with nyschooldata","text":"Check codes properly formatted:","code":"# Validate BEDS codes validate_beds_code(\"010100010018\")    # TRUE - valid validate_beds_code(\"31000001023\")     # FALSE - only 11 digits validate_beds_code(\"invalid\")          # FALSE - not numeric"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"looking-up-specific-schools","dir":"Articles","previous_headings":"Working with BEDS Codes","what":"Looking Up Specific Schools","title":"Getting Started with nyschooldata","text":"Use fetch_enr_school() get data single school:","code":"# Get enrollment for a specific school by BEDS code school_enr <- fetch_enr_school(\"010100010018\", 2024) school_enr  # Get multiple years for a school school_history <- fetch_enr_school(\"010100010018\", 2020:2024)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"looking-up-districts","dir":"Articles","previous_headings":"Working with BEDS Codes","what":"Looking Up Districts","title":"Getting Started with nyschooldata","text":"Use fetch_enr_district() district-level queries:","code":"# Get all schools in a district albany_schools <- fetch_enr_district(\"010100\", 2024, level = \"school\")  # Get district aggregates only albany_district <- fetch_enr_district(\"010100\", 2024, level = \"district\")"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"top-districts-by-enrollment","dir":"Articles","previous_headings":"Filtering and Analysis","what":"Top Districts by Enrollment","title":"Getting Started with nyschooldata","text":"","code":"enr %>%   filter(is_district, grade_level == \"TOTAL\") %>%   arrange(desc(n_students)) %>%   select(district_name, county, n_students) %>%   head(10)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"enrollment-by-county","dir":"Articles","previous_headings":"Filtering and Analysis","what":"Enrollment by County","title":"Getting Started with nyschooldata","text":"","code":"enr %>%   filter(is_district, grade_level == \"TOTAL\") %>%   group_by(county) %>%   summarize(     n_districts = n(),     total_enrollment = sum(n_students, na.rm = TRUE)   ) %>%   arrange(desc(total_enrollment)) %>%   head(10)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"grade-level-distribution","dir":"Articles","previous_headings":"Filtering and Analysis","what":"Grade-Level Distribution","title":"Getting Started with nyschooldata","text":"","code":"# Statewide grade distribution enr %>%   filter(is_district, grade_level != \"TOTAL\") %>%   group_by(grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE)) %>%   arrange(factor(grade_level, levels = c(\"PK\", \"K\", sprintf(\"%02d\", 1:12))))"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"filtering-by-grade-span","dir":"Articles","previous_headings":"Filtering and Analysis","what":"Filtering by Grade Span","title":"Getting Started with nyschooldata","text":"Use filter_grade_span() common grade groupings:","code":"# Get only elementary grades (K-5) elem_enr <- filter_grade_span(enr, \"elem\")  # Get only high school grades (9-12) hs_enr <- filter_grade_span(enr, \"hs\")  # Available spans: \"pk12\", \"k12\", \"k8\", \"hs\", \"elem\" (K-5), \"middle\" (6-8)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"custom-grade-aggregates","dir":"Articles","previous_headings":"Filtering and Analysis","what":"Custom Grade Aggregates","title":"Getting Started with nyschooldata","text":"Create K-8, HS, K-12 aggregates enr_grade_aggs():","code":"# Get grade span aggregates aggs <- enr_grade_aggs(enr)  aggs %>%   filter(is_district) %>%   select(district_name, grade_level, n_students) %>%   head(15)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"nyc-schools","dir":"Articles","previous_headings":"","what":"NYC Schools","title":"Getting Started with nyschooldata","text":"NYC unique New York - ’s organized 32 geographic Community School Districts plus District 75 (special education) District 79 (alternative schools). Use convenience function: NYC district codes follow pattern: - 30xxxx - District 75 (citywide special education) - 31xxxx - Manhattan districts - 32xxxx - Bronx districts - 33xxxx - Brooklyn districts - 34xxxx - Queens districts - 35xxxx - Staten Island district","code":"# Get NYC enrollment directly nyc <- fetch_enr_nyc(2024)  # Largest NYC schools nyc %>%   filter(is_school, grade_level == \"TOTAL\") %>%   arrange(desc(n_students)) %>%   select(school_name, district_name, n_students) %>%   head(10)"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"fetching-multiple-years","dir":"Articles","previous_headings":"Multi-Year Analysis","what":"Fetching Multiple Years","title":"Getting Started with nyschooldata","text":"","code":"# Fetch 5 years of data enr_multi <- fetch_enr_years(2020:2024)  # Check years retrieved unique(enr_multi$end_year)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"enrollment-trends","dir":"Articles","previous_headings":"Multi-Year Analysis","what":"Enrollment Trends","title":"Getting Started with nyschooldata","text":"","code":"# Statewide enrollment trend state_trend <- enr_multi %>%   filter(is_district, grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(total_enrollment = sum(n_students, na.rm = TRUE))  state_trend"},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"statewide-enrollment-trend","dir":"Articles","previous_headings":"Visualization Examples","what":"Statewide Enrollment Trend","title":"Getting Started with nyschooldata","text":"","code":"library(ggplot2) library(scales)  ggplot(state_trend, aes(x = end_year, y = total_enrollment)) +   geom_line(linewidth = 1, color = \"steelblue\") +   geom_point(size = 3, color = \"steelblue\") +   scale_y_continuous(labels = comma, limits = c(0, NA)) +   labs(     title = \"New York State Public School Enrollment\",     x = \"School Year (End Year)\",     y = \"Total Enrollment\",     caption = \"Source: NYSED IRS\"   ) +   theme_minimal()"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"grade-level-distribution-1","dir":"Articles","previous_headings":"Visualization Examples","what":"Grade-Level Distribution","title":"Getting Started with nyschooldata","text":"","code":"grade_dist <- enr %>%   filter(is_district, !grade_level %in% c(\"TOTAL\", \"PK_HALF\", \"PK_FULL\", \"K_HALF\", \"K_FULL\", \"UG_ELEM\", \"UG_SEC\")) %>%   group_by(grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE)) %>%   mutate(grade_level = factor(grade_level, levels = c(\"PK\", \"K\", sprintf(\"%02d\", 1:12))))  ggplot(grade_dist, aes(x = grade_level, y = total)) +   geom_col(fill = \"steelblue\") +   scale_y_continuous(labels = comma) +   labs(     title = \"NY State Enrollment by Grade Level\",     x = \"Grade\",     y = \"Enrollment\"   ) +   theme_minimal()"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"comparing-districts","dir":"Articles","previous_headings":"Visualization Examples","what":"Comparing Districts","title":"Getting Started with nyschooldata","text":"","code":"# Compare top 5 districts over time top_districts <- enr_multi %>%   filter(is_district, grade_level == \"TOTAL\", end_year == max(end_year)) %>%   slice_max(n_students, n = 5) %>%   pull(district_code)  district_trends <- enr_multi %>%   filter(district_code %in% top_districts, is_district, grade_level == \"TOTAL\")  ggplot(district_trends, aes(x = end_year, y = n_students, color = district_name)) +   geom_line(linewidth = 1) +   geom_point(size = 2) +   scale_y_continuous(labels = comma) +   labs(     title = \"Enrollment Trends: Top 5 NY Districts\",     x = \"School Year\",     y = \"Enrollment\",     color = \"District\"   ) +   theme_minimal() +   theme(legend.position = \"bottom\") +   guides(color = guide_legend(nrow = 2))"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"caching","dir":"Articles","previous_headings":"","what":"Caching","title":"Getting Started with nyschooldata","text":"Data cached locally default avoid repeated downloads. Manage cache :","code":"# View cache status cache_status()  # Clear all cached data clear_enr_cache()  # Clear only 2024 data clear_enr_cache(2024)  # Force fresh download (bypass cache) enr_fresh <- fetch_enr(2024, use_cache = FALSE)"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"school-year-labels","dir":"Articles","previous_headings":"","what":"School Year Labels","title":"Getting Started with nyschooldata","text":"Convert year integers label strings:","code":"# Convert end year to label school_year_label(2024) # [1] \"2023-24\"  # Parse label back to end year parse_school_year(\"2023-24\") # [1] 2024  # Works with \"2023-2024\" format too parse_school_year(\"2023-2024\") # [1] 2024"},{"path":"https://almartin82.github.io/nyschooldata/articles/quickstart.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Getting Started with nyschooldata","text":"See ?fetch_enr complete function documentation Explore Data Quality QA vignette validation examples Check get_available_years() current range available data Visit pkgdown site full API reference","code":""},{"path":"https://almartin82.github.io/nyschooldata/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Andy Martin. Author, maintainer.","code":""},{"path":"https://almartin82.github.io/nyschooldata/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Martin (2026). nyschooldata: Fetch Process New York School Data. R package version 0.1.0, https://almartin82.github.io/nyschooldata/.","code":"@Manual{,   title = {nyschooldata: Fetch and Process New York School Data},   author = {Andy Martin},   year = {2026},   note = {R package version 0.1.0},   url = {https://almartin82.github.io/nyschooldata/}, }"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"nyschooldata","dir":"","previous_headings":"","what":"nyschooldata: NY School Enrollment Data","title":"nyschooldata: NY School Enrollment Data","text":"Docs: https://almartin82.github.io/nyschooldata/ R package fetching processing New York State school enrollment data NYSED.","code":""},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"what-can-you-find-with-nyschooldata","dir":"","previous_headings":"","what":"What can you find with nyschooldata?","title":"nyschooldata: NY School Enrollment Data","text":"48 years enrollment data (1977-2025). 4,700+ schools. 700+ districts. 62 counties. stories hiding numbers.","code":"library(nyschooldata) library(dplyr)"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"the-long-view-a-generation-of-decline-1977-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"The Long View: A Generation of Decline (1977-2024)","title":"nyschooldata: NY School Enrollment Data","text":"New York 3.3 million students 1977. Today: 2.4 million. ’s 895,000 students—gone.","code":"fetch_enr_years(c(1977, 1990, 2000, 2010, 2024), level = \"district\") %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(total = sum(n_students, na.rm = TRUE)) #>   end_year   total #> 1     1977 3299863 #> 2     1990 2509928 #> 3     2000 2864473 #> 4     2010 2702000 #> 5     2024 2404319"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"the-millennial-plateau-2000-2012","dir":"","previous_headings":"What can you find with nyschooldata?","what":"The Millennial Plateau (2000-2012)","title":"nyschooldata: NY School Enrollment Data","text":"early 2000s saw remarkable stability. Enrollment hovered around 2.7-2.8M decade decline accelerated.","code":"fetch_enr_years(2000:2012, level = \"district\") %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(total = sum(n_students, na.rm = TRUE))"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"the-modern-decline-2012-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"The Modern Decline (2012-2024)","title":"nyschooldata: NY School Enrollment Data","text":"-295,521 students (-11%) just 12 years. decline accelerated 2010s.","code":"fetch_enr_years(2012:2024, level = \"district\") %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(total = sum(n_students, na.rm = TRUE))"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"the-covid-cliff-2019-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"The COVID Cliff (2019-2024)","title":"nyschooldata: NY School Enrollment Data","text":"2021 lost 106,560 students single year (-4.2%)—largest drop ever recorded. 2024 shows signs stabilization (+388 students).","code":"fetch_enr_years(2019:2024, level = \"district\") %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year) %>%   summarize(total = sum(n_students, na.rm = TRUE)) %>%   mutate(change = total - lag(total)) #>   end_year   total  change #> 1     2019 2577890      NA #> 2     2020 2561821  -16069 #> 3     2021 2455261 -106560  <- COVID cliff #> 4     2022 2418631  -36630 #> 5     2023 2403931  -14700 #> 6     2024 2404319    +388  <- first positive year"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"grade-level-analysis-where-are-we-losing-students","dir":"","previous_headings":"What can you find with nyschooldata?","what":"Grade-Level Analysis: Where Are We Losing Students?","title":"nyschooldata: NY School Enrollment Data","text":"Grade 1 fell 17% since 2012—pipeline shrinking. Pre-K exploded.","code":"# Compare grade levels fetch_enr_years(c(2012, 2024), level = \"district\") %>%   filter(grade_level %in% c(\"PK_FULL\", \"K\", \"01\", \"05\", \"09\", \"12\")) %>%   group_by(end_year, grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE)) %>%   pivot_wider(names_from = end_year, values_from = total) #>   grade_level  `2012`  `2024`  change #> 1 PK_FULL      27885  157116  +463% #> 2 K           188512  166897   -11% #> 3 01          193366  159723   -17% #> 4 05          196429  168488   -14% #> 5 09          208901  176893   -15% #> 6 12          176789  171553    -3%"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"the-pre-k-revolution-2012-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"The Pre-K Revolution (2012-2024)","title":"nyschooldata: NY School Enrollment Data","text":"Full-day Pre-K grew 463%—28K 157K. NYC’s Universal Pre-K launched 2014 drove 115% jump 2015.","code":"fetch_enr_years(2012:2024, level = \"district\") %>%   filter(grade_level %in% c(\"PK_FULL\", \"PK_HALF\")) %>%   group_by(end_year, grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE))"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"nyc-vs-rest-of-state","dir":"","previous_headings":"What can you find with nyschooldata?","what":"NYC vs Rest of State","title":"nyschooldata: NY School Enrollment Data","text":"NYC 99% full-day Pre-K. rest state? 85%.","code":"fetch_enr(2024, level = \"district\") %>%   filter(grade_level %in% c(\"PK_FULL\", \"PK_HALF\")) %>%   group_by(is_nyc, grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE)) %>%   pivot_wider(names_from = grade_level, values_from = total) %>%   mutate(pct_full = PK_FULL / (PK_FULL + PK_HALF) * 100) #>   is_nyc PK_FULL PK_HALF pct_full #> 1 FALSE   53749    9416     85% #> 2 TRUE   103367     865     99%"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"nyc-special-education-district-75-2012-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"NYC Special Education: District 75 (2012-2024)","title":"nyschooldata: NY School Enrollment Data","text":"NYC geographic districts shrank, District 75 grew 40%. NYC’s citywide special education program one growth areas.","code":"fetch_enr_nyc(c(2012, 2024)) %>%   filter(grade_level == \"TOTAL\", is_district) %>%   filter(grepl(\"DIST 75|GEOG DIST\", district_name)) %>%   group_by(end_year, district_name) %>%   summarize(total = sum(n_students))"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"county-analysis-winners-and-losers-2012-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"County Analysis: Winners and Losers (2012-2024)","title":"nyschooldata: NY School Enrollment Data","text":"Saratoga County grew (+0.3%). Bronx lost 24%—worst decline among major counties.","code":"fetch_enr_years(c(2012, 2024), level = \"district\") %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year, county) %>%   summarize(total = sum(n_students, na.rm = TRUE)) %>%   pivot_wider(names_from = end_year, values_from = total) %>%   mutate(pct_change = (`2024` - `2012`) / `2012` * 100) %>%   arrange(pct_change) #> Top decliners: #> BRONX:       -23.7% #> SCHENECTADY: -18.7% #> CHEMUNG:     -17.5% #> ... #> Only grower: #> SARATOGA:    +0.3%"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"charter-school-growth-2023-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"Charter School Growth (2023-2024)","title":"nyschooldata: NY School Enrollment Data","text":"181,000 students (7.3%) now attend charter schools across 343 schools.","code":"fetch_enr(2024, level = \"school\") %>%   filter(grade_level == \"TOTAL\", is_school) %>%   group_by(is_charter) %>%   summarize(     students = sum(n_students, na.rm = TRUE),     schools = n()   ) #>   is_charter students schools #> 1 FALSE      2307920    4406 #> 2 TRUE        181334     343"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"major-district-trends-2012-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"Major District Trends (2012-2024)","title":"nyschooldata: NY School Enrollment Data","text":"Rochester lost 30%—steepest decline among major districts.","code":"# Top 5 districts by 2012 enrollment fetch_enr_years(c(2012, 2024), level = \"district\") %>%   filter(grade_level == \"TOTAL\") %>%   group_by(end_year, district_name) %>%   summarize(total = sum(n_students)) %>%   pivot_wider(names_from = end_year, values_from = total) %>%   filter(`2012` > 20000) %>%   mutate(pct = (`2024` - `2012`) / `2012` * 100) %>%   arrange(pct)"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"kindergarten-half-day-vs-full-day-2012-2024","dir":"","previous_headings":"What can you find with nyschooldata?","what":"Kindergarten: Half-Day vs Full-Day (2012-2024)","title":"nyschooldata: NY School Enrollment Data","text":"Full-day K now dominant. Half-day K collapsed 35K 8K students.","code":"fetch_enr_years(c(2012, 2018, 2024), level = \"district\") %>%   filter(grade_level %in% c(\"K_HALF\", \"K_FULL\")) %>%   group_by(end_year, grade_level) %>%   summarize(total = sum(n_students, na.rm = TRUE)) #>   end_year grade_level  total #> 1     2012 K_FULL      153125 #> 2     2012 K_HALF       35387 #> 3     2024 K_FULL      158575 #> 4     2024 K_HALF        8322"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"individual-school-lookup","dir":"","previous_headings":"What can you find with nyschooldata?","what":"Individual School Lookup","title":"nyschooldata: NY School Enrollment Data","text":"Get school’s enrollment BEDS code:","code":"# Albany High School fetch_enr_school(\"010100010023\", 2020:2024) %>%   filter(grade_level == \"TOTAL\")"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"individual-district-lookup","dir":"","previous_headings":"What can you find with nyschooldata?","what":"Individual District Lookup","title":"nyschooldata: NY School Enrollment Data","text":"Get schools district:","code":"# Rochester City SD fetch_enr_district(\"261600\", 2024, level = \"school\") %>%   filter(grade_level == \"TOTAL\", is_school) %>%   arrange(desc(n_students))"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"nyschooldata: NY School Enrollment Data","text":"","code":"# install.packages(\"remotes\") remotes::install_github(\"almartin82/nyschooldata\")"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"nyschooldata: NY School Enrollment Data","text":"","code":"library(nyschooldata) library(dplyr)  # Fetch 2024 data (2023-24 school year) enr <- fetch_enr(2024)  # Statewide total enr %>%   filter(is_district, grade_level == \"TOTAL\") %>%   summarize(total = sum(n_students, na.rm = TRUE)) #> 2,404,319 students"},{"path":[]},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"grade-levels","dir":"","previous_headings":"Data Availability & Format","what":"Grade Levels","title":"nyschooldata: NY School Enrollment Data","text":"years include: K, 1-12, Ungraded Elementary, Ungraded Secondary Pre-K breakdown (1995+): PK_HALF, PK_FULL Kindergarten breakdown: K_HALF, K_FULL","code":""},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"geographic-hierarchy","dir":"","previous_headings":"Data Availability & Format","what":"Geographic Hierarchy","title":"nyschooldata: NY School Enrollment Data","text":"","code":"State (1) └── County (62)     └── District (~730)         └── School (~4,700)"},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"identifiers","dir":"","previous_headings":"Data Availability & Format","what":"Identifiers","title":"nyschooldata: NY School Enrollment Data","text":"Digits 1-6: District code Digits 7-10: School code Digits 11-12: Check digits District Code: 6-digit district identifier (e.g., 010100 = Albany City SD)","code":""},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"data-source","dir":"","previous_headings":"Data Availability & Format","what":"Data Source","title":"nyschooldata: NY School Enrollment Data","text":"data comes NYSED Information Reporting Services. Files downloaded, cached locally, standardized consistent schema.","code":""},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"caveats","dir":"","previous_headings":"Data Availability & Format","what":"Caveats","title":"nyschooldata: NY School Enrollment Data","text":"Suppression: Small cell sizes may suppressed (shown NA) Charter schools: Charter flag requires school-level data (2012+) Historical comparisons: Pre-K wasn’t tracked 1995; use K-12 totals long-term trends NYC structure: NYC 32 geographic districts + District 75 (special ed) + District 79 (alternative)","code":""},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"nyschooldata: NY School Enrollment Data","text":"Full Analysis Charts Getting Started Guide API Reference","code":""},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"part-of-the-50-state-schooldata-family","dir":"","previous_headings":"","what":"Part of the 50 State Schooldata Family","title":"nyschooldata: NY School Enrollment Data","text":"package part family R packages providing school enrollment data 50 US states. package fetches data directly state’s Department Education. See also: njschooldata - original state schooldata package New Jersey. packages: github.com/almartin82","code":""},{"path":"https://almartin82.github.io/nyschooldata/index.html","id":"author","dir":"","previous_headings":"","what":"Author","title":"nyschooldata: NY School Enrollment Data","text":"Andy Martin (almartin@gmail.com)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/add_agg_flags.html","id":null,"dir":"Reference","previous_headings":"","what":"Add aggregation level flags — add_agg_flags","title":"Add aggregation level flags — add_agg_flags","text":"Determines whether row state, district, school level data adds NYC charter school flags.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/add_agg_flags.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add aggregation level flags — add_agg_flags","text":"","code":"add_agg_flags(df)"},{"path":"https://almartin82.github.io/nyschooldata/reference/add_agg_flags.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add aggregation level flags — add_agg_flags","text":"df Processed data frame","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/add_agg_flags.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add aggregation level flags — add_agg_flags","text":"Data frame aggregation flags","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/build_enr_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Build NYSED IRS enrollment file URL — build_enr_url","title":"Build NYSED IRS enrollment file URL — build_enr_url","text":"Constructs download URL based year naming conventions. URL patterns changed 2022.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/build_enr_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build NYSED IRS enrollment file URL — build_enr_url","text":"","code":"build_enr_url(end_year, level = \"school\", category = \"all-students\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/build_enr_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build NYSED IRS enrollment file URL — build_enr_url","text":"end_year School year end level Data level category Data category (e.g., \"-students\", \"race--ethnic-origin\")","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/build_enr_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build NYSED IRS enrollment file URL — build_enr_url","text":"Full download URL","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_exists.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if cached data exists and is valid — cache_exists","title":"Check if cached data exists and is valid — cache_exists","text":"Check cached data exists valid","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_exists.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if cached data exists and is valid — cache_exists","text":"","code":"cache_exists(end_year, type = \"raw\", max_age = 30)"},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_exists.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if cached data exists and is valid — cache_exists","text":"end_year School year end type File type max_age Maximum age days (default 30)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_exists.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if cached data exists and is valid — cache_exists","text":"TRUE valid cache exists","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Show cache status — cache_status","title":"Show cache status — cache_status","text":"Lists cached data files size age.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show cache status — cache_status","text":"","code":"cache_status()"},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Show cache status — cache_status","text":"Data frame cache information (invisibly)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/cache_status.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Show cache status — cache_status","text":"","code":"if (FALSE) { # \\dontrun{ cache_status() } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/clear_enr_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear the nyschooldata cache — clear_enr_cache","title":"Clear the nyschooldata cache — clear_enr_cache","text":"Removes cached data files.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/clear_enr_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear the nyschooldata cache — clear_enr_cache","text":"","code":"clear_enr_cache(years = NULL)"},{"path":"https://almartin82.github.io/nyschooldata/reference/clear_enr_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clear the nyschooldata cache — clear_enr_cache","text":"years Optional vector years clear. NULL, clears .","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/clear_enr_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear the nyschooldata cache — clear_enr_cache","text":"Invisibly returns number files removed","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/clear_enr_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear the nyschooldata cache — clear_enr_cache","text":"","code":"if (FALSE) { # \\dontrun{ # Clear all cached data clear_enr_cache()  # Clear only 2024 data clear_enr_cache(2024) } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/enr_grade_aggs.html","id":null,"dir":"Reference","previous_headings":"","what":"Custom Enrollment Grade Level Aggregates — enr_grade_aggs","title":"Custom Enrollment Grade Level Aggregates — enr_grade_aggs","text":"Creates aggregations common grade groupings: K-8, 9-12 (HS), K-12.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/enr_grade_aggs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Custom Enrollment Grade Level Aggregates — enr_grade_aggs","text":"","code":"enr_grade_aggs(df)"},{"path":"https://almartin82.github.io/nyschooldata/reference/enr_grade_aggs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Custom Enrollment Grade Level Aggregates — enr_grade_aggs","text":"df tidy enrollment df (output tidy_enr)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/enr_grade_aggs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Custom Enrollment Grade Level Aggregates — enr_grade_aggs","text":"df aggregated enrollment data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch New York enrollment data — fetch_enr","title":"Fetch New York enrollment data — fetch_enr","text":"Downloads processes enrollment data New York State Education Department (NYSED) IRS Public School Enrollment archive.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch New York enrollment data — fetch_enr","text":"","code":"fetch_enr(end_year, level = \"school\", tidy = TRUE, use_cache = TRUE)"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch New York enrollment data — fetch_enr","text":"end_year school year. Year end academic year - eg 2023-24 school year year '2024'. Valid values 2012-2025. level Data level: \"school\" (default) \"district\" tidy TRUE (default), returns data long (tidy) format grade_level column. FALSE, returns wide format. use_cache TRUE (default), uses locally cached data available. Set FALSE force re-download NYSED.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch New York enrollment data — fetch_enr","text":"Data frame enrollment data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch New York enrollment data — fetch_enr","text":"","code":"if (FALSE) { # \\dontrun{ # Get 2024 enrollment data (2023-24 school year) enr_2024 <- fetch_enr(2024)  # Get wide format enr_wide <- fetch_enr(2024, tidy = FALSE)  # Get district-level data enr_district <- fetch_enr(2024, level = \"district\")  # Force fresh download (ignore cache) enr_fresh <- fetch_enr(2024, use_cache = FALSE) } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_district.html","id":null,"dir":"Reference","previous_headings":"","what":"Get enrollment for a specific district — fetch_enr_district","title":"Get enrollment for a specific district — fetch_enr_district","text":"Convenience function filter enrollment data single district.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_district.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get enrollment for a specific district — fetch_enr_district","text":"","code":"fetch_enr_district(   district_code,   end_year,   level = \"school\",   tidy = TRUE,   use_cache = TRUE )"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_district.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get enrollment for a specific district — fetch_enr_district","text":"district_code 6-digit district code (12-digit district BEDS code) end_year School year end (vector years) level Data level: \"school\" get schools district, \"district\" district totals tidy TRUE, returns tidy format use_cache TRUE, uses cache","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_district.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get enrollment for a specific district — fetch_enr_district","text":"Data frame enrollment specified district","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_district.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get enrollment for a specific district — fetch_enr_district","text":"","code":"if (FALSE) { # \\dontrun{ # Get all schools in a district district_schools <- fetch_enr_district(\"010100\", 2024)  # Get district totals only district_total <- fetch_enr_district(\"010100\", 2024, level = \"district\") } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_nyc.html","id":null,"dir":"Reference","previous_headings":"","what":"Get NYC enrollment data — fetch_enr_nyc","title":"Get NYC enrollment data — fetch_enr_nyc","text":"Convenience function get enrollment data NYC DOE schools .","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_nyc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get NYC enrollment data — fetch_enr_nyc","text":"","code":"fetch_enr_nyc(end_year, level = \"school\", tidy = TRUE, use_cache = TRUE)"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_nyc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get NYC enrollment data — fetch_enr_nyc","text":"end_year School year end (vector years) level Data level: \"school\" \"district\" tidy TRUE, returns tidy format use_cache TRUE, uses cache","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_nyc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get NYC enrollment data — fetch_enr_nyc","text":"Data frame NYC enrollment data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_nyc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get NYC enrollment data — fetch_enr_nyc","text":"","code":"if (FALSE) { # \\dontrun{ # Get NYC school enrollment nyc_enr <- fetch_enr_nyc(2024) } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_school.html","id":null,"dir":"Reference","previous_headings":"","what":"Get enrollment for a specific school by BEDS code — fetch_enr_school","title":"Get enrollment for a specific school by BEDS code — fetch_enr_school","text":"Convenience function filter enrollment data single school.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_school.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get enrollment for a specific school by BEDS code — fetch_enr_school","text":"","code":"fetch_enr_school(beds_code, end_year, tidy = TRUE, use_cache = TRUE)"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_school.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get enrollment for a specific school by BEDS code — fetch_enr_school","text":"beds_code 12-digit BEDS code school end_year School year end (vector years) tidy TRUE, returns tidy format use_cache TRUE, uses cache","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_school.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get enrollment for a specific school by BEDS code — fetch_enr_school","text":"Data frame enrollment specified school","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_school.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get enrollment for a specific school by BEDS code — fetch_enr_school","text":"","code":"if (FALSE) { # \\dontrun{ # Get enrollment for a specific school school_enr <- fetch_enr_school(\"010100010018\", 2024)  # Get multiple years for a school school_history <- fetch_enr_school(\"010100010018\", 2020:2024) } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_years.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch enrollment data for multiple years — fetch_enr_years","title":"Fetch enrollment data for multiple years — fetch_enr_years","text":"Convenience function download enrollment data multiple years combine single data frame.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_years.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch enrollment data for multiple years — fetch_enr_years","text":"","code":"fetch_enr_years(years, level = \"school\", tidy = TRUE, use_cache = TRUE)"},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_years.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch enrollment data for multiple years — fetch_enr_years","text":"years Vector end years (e.g., 2020:2024) level Data level: \"school\" \"district\" tidy TRUE, returns tidy format use_cache TRUE, uses cache","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_years.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch enrollment data for multiple years — fetch_enr_years","text":"Combined data frame enrollment data years","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/fetch_enr_years.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch enrollment data for multiple years — fetch_enr_years","text":"","code":"if (FALSE) { # \\dontrun{ # Get 5 years of data enr_multi <- fetch_enr_years(2020:2024)  # Get district-level data for multiple years dist_multi <- fetch_enr_years(2020:2024, level = \"district\") } # }"},{"path":"https://almartin82.github.io/nyschooldata/reference/filter_grade_span.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter enrollment data by grade span — filter_grade_span","title":"Filter enrollment data by grade span — filter_grade_span","text":"Convenience function filter common grade spans.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/filter_grade_span.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter enrollment data by grade span — filter_grade_span","text":"","code":"filter_grade_span(df, span = \"k12\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/filter_grade_span.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter enrollment data by grade span — filter_grade_span","text":"df Tidy enrollment data frame span Grade span: \"pk12\", \"k12\", \"k8\", \"hs\", \"elem\" (K-5), \"middle\" (6-8)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/filter_grade_span.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter enrollment data by grade span — filter_grade_span","text":"Filtered data frame","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_available_years.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Available Years — get_available_years","title":"Get Available Years — get_available_years","text":"Returns range years enrollment data available.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_available_years.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Available Years — get_available_years","text":"","code":"get_available_years()"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_available_years.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Available Years — get_available_years","text":"Named list min_year max_year","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_available_years.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Available Years — get_available_years","text":"","code":"get_available_years() #> $min_year #> [1] 1977 #>  #> $max_year #> [1] 2025 #>"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the cache directory for nyschooldata — get_cache_dir","title":"Get the cache directory for nyschooldata — get_cache_dir","text":"Returns path cache directory, creating necessary. Uses rappdirs cross-platform cache location.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the cache directory for nyschooldata — get_cache_dir","text":"","code":"get_cache_dir()"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the cache directory for nyschooldata — get_cache_dir","text":"Path cache directory","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cached file path for a given year — get_cache_path","title":"Get cached file path for a given year — get_cache_path","text":"Get cached file path given year","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cached file path for a given year — get_cache_path","text":"","code":"get_cache_path(end_year, type = \"raw\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cached file path for a given year — get_cache_path","text":"end_year School year end type File type (\"raw\" \"processed\" \"tidy\")","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_cache_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get cached file path for a given year — get_cache_path","text":"Path cached file","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr.html","id":null,"dir":"Reference","previous_headings":"","what":"Download raw enrollment data from NYSED — get_raw_enr","title":"Download raw enrollment data from NYSED — get_raw_enr","text":"Downloads raw enrollment data files NYSED IRS archive. files contain grade-level enrollment school district students.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download raw enrollment data from NYSED — get_raw_enr","text":"","code":"get_raw_enr(end_year, level = \"school\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download raw enrollment data from NYSED — get_raw_enr","text":"end_year School year end (2023-24 = 2024). Valid years: 1977-2025. level Data level: \"school\" (default) \"district\"","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download raw enrollment data from NYSED — get_raw_enr","text":"Raw data frame NYSED","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_archive.html","id":null,"dir":"Reference","previous_headings":"","what":"Download archive format (1977-2011) NYSED data — get_raw_enr_archive","title":"Download archive format (1977-2011) NYSED data — get_raw_enr_archive","text":"Download archive format (1977-2011) NYSED data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_archive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download archive format (1977-2011) NYSED data — get_raw_enr_archive","text":"","code":"get_raw_enr_archive(end_year, level = \"district\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_archive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download archive format (1977-2011) NYSED data — get_raw_enr_archive","text":"end_year School year end level Data level","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_archive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download archive format (1977-2011) NYSED data — get_raw_enr_archive","text":"Raw data frame","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_demographics.html","id":null,"dir":"Reference","previous_headings":"","what":"Download demographics enrollment data from NYSED — get_raw_enr_demographics","title":"Download demographics enrollment data from NYSED — get_raw_enr_demographics","text":"Downloads enrollment broken demographic subgroups (race/ethnicity, economically disadvantaged, ELL, SWD).","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_demographics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download demographics enrollment data from NYSED — get_raw_enr_demographics","text":"","code":"get_raw_enr_demographics(end_year, level = \"school\", category = \"race\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_demographics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download demographics enrollment data from NYSED — get_raw_enr_demographics","text":"end_year School year end level Data level: \"school\" \"district\" category Demographic category: \"race\", \"economic\", \"ell\", \"swd\"","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_demographics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download demographics enrollment data from NYSED — get_raw_enr_demographics","text":"Raw data frame demographic breakdowns","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_legacy.html","id":null,"dir":"Reference","previous_headings":"","what":"Download legacy format (2012-2021) NYSED data — get_raw_enr_legacy","title":"Download legacy format (2012-2021) NYSED data — get_raw_enr_legacy","text":"Download legacy format (2012-2021) NYSED data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_legacy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download legacy format (2012-2021) NYSED data — get_raw_enr_legacy","text":"","code":"get_raw_enr_legacy(end_year, level = \"school\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_legacy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download legacy format (2012-2021) NYSED data — get_raw_enr_legacy","text":"end_year School year end level Data level","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_legacy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download legacy format (2012-2021) NYSED data — get_raw_enr_legacy","text":"Raw data frame","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_modern.html","id":null,"dir":"Reference","previous_headings":"","what":"Download modern format (2022+) NYSED data — get_raw_enr_modern","title":"Download modern format (2022+) NYSED data — get_raw_enr_modern","text":"Download modern format (2022+) NYSED data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_modern.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download modern format (2022+) NYSED data — get_raw_enr_modern","text":"","code":"get_raw_enr_modern(end_year, level = \"school\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_modern.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download modern format (2022+) NYSED data — get_raw_enr_modern","text":"end_year School year end level Data level","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/get_raw_enr_modern.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download modern format (2022+) NYSED data — get_raw_enr_modern","text":"Raw data frame","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/id_enr_aggs.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify enrollment aggregation levels — id_enr_aggs","title":"Identify enrollment aggregation levels — id_enr_aggs","text":"Adds boolean flags identify state, district, school level records. typically called automatically fetch_enr, can used re-identify aggregation levels filtering.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/id_enr_aggs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify enrollment aggregation levels — id_enr_aggs","text":"","code":"id_enr_aggs(df)"},{"path":"https://almartin82.github.io/nyschooldata/reference/id_enr_aggs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify enrollment aggregation levels — id_enr_aggs","text":"df Enrollment dataframe","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/id_enr_aggs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify enrollment aggregation levels — id_enr_aggs","text":"data.frame boolean aggregation flags","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/nyschooldata-package.html","id":null,"dir":"Reference","previous_headings":"","what":"nyschooldata: Fetch and Process New York School Data — nyschooldata-package","title":"nyschooldata: Fetch and Process New York School Data — nyschooldata-package","text":"Downloads processes school data New York State Education Department (NYSED). Provides functions fetching enrollment data transforming tidy format analysis.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/nyschooldata-package.html","id":"main-functions","dir":"Reference","previous_headings":"","what":"Main Functions","title":"nyschooldata: Fetch and Process New York School Data — nyschooldata-package","text":"fetch_enr Fetch enrollment data school year fetch_enr_years Fetch enrollment data multiple years fetch_enr_school Fetch enrollment specific school BEDS code fetch_enr_district Fetch enrollment specific district fetch_enr_nyc Fetch NYC DOE enrollment data tidy_enr Transform wide enrollment data long format id_enr_aggs Identify aggregation levels (state/district/school) enr_grade_aggs Create grade-level aggregates (K-8, HS, K-12)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/nyschooldata-package.html","id":"data-sources","dir":"Reference","previous_headings":"","what":"Data Sources","title":"nyschooldata: Fetch and Process New York School Data — nyschooldata-package","text":"Data downloaded NYSED data portal https://data.nysed.gov/.","code":""},{"path":[]},{"path":"https://almartin82.github.io/nyschooldata/reference/nyschooldata-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"nyschooldata: Fetch and Process New York School Data — nyschooldata-package","text":"Maintainer: Andy Martin almartin@gmail.com","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_beds_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse BEDS code into components — parse_beds_code","title":"Parse BEDS code into components — parse_beds_code","text":"BEDS codes 12 digits: DDDDDDSSSSCC DDDDDD: District code (6 digits) SSSS: School code (4 digits) CC: Check digits (2 digits)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_beds_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse BEDS code into components — parse_beds_code","text":"","code":"parse_beds_code(beds_code)"},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_beds_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse BEDS code into components — parse_beds_code","text":"beds_code Character vector BEDS codes","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_beds_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse BEDS code into components — parse_beds_code","text":"Data frame parsed components","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_beds_code.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parse BEDS code into components — parse_beds_code","text":"","code":"parse_beds_code(\"010100010018\") #>      beds_code district_code school_code check_digits #> 1 010100010018        010100        0100           18 # Returns: district_code = \"010100\", school_code = \"0001\", check_digits = \"18\""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_school_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse School Year Label — parse_school_year","title":"Parse School Year Label — parse_school_year","text":"Converts school year label string end year integer.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_school_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse School Year Label — parse_school_year","text":"","code":"parse_school_year(label)"},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_school_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse School Year Label — parse_school_year","text":"label Character school year label (e.g., \"2023-24\")","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_school_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse School Year Label — parse_school_year","text":"Integer end year (e.g., 2024)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/parse_school_year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parse School Year Label — parse_school_year","text":"","code":"parse_school_year(\"2023-24\")  # Returns 2024 #> [1] 2024 parse_school_year(\"2020-21\")  # Returns 2021 #> [1] 2021"},{"path":"https://almartin82.github.io/nyschooldata/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"Pipe operator","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://almartin82.github.io/nyschooldata/reference/process_enr.html","id":null,"dir":"Reference","previous_headings":"","what":"Process raw NYSED enrollment data — process_enr","title":"Process raw NYSED enrollment data — process_enr","text":"Transforms raw data get_raw_enr standardized format consistent column names proper data types.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/process_enr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process raw NYSED enrollment data — process_enr","text":"","code":"process_enr(df, end_year)"},{"path":"https://almartin82.github.io/nyschooldata/reference/process_enr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process raw NYSED enrollment data — process_enr","text":"df Raw data frame get_raw_enr end_year School year end","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/process_enr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process raw NYSED enrollment data — process_enr","text":"Processed data frame standardized columns","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/read_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Read data from cache — read_cache","title":"Read data from cache — read_cache","text":"Read data cache","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/read_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read data from cache — read_cache","text":"","code":"read_cache(end_year, type = \"raw\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/read_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read data from cache — read_cache","text":"end_year School year end type File type","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/read_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read data from cache — read_cache","text":"Cached data frame","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/safe_numeric.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert to numeric, handling suppression markers — safe_numeric","title":"Convert to numeric, handling suppression markers — safe_numeric","text":"NYSED uses various markers suppressed data (*, s, etc.) uses commas large numbers.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/safe_numeric.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert to numeric, handling suppression markers — safe_numeric","text":"","code":"safe_numeric(x)"},{"path":"https://almartin82.github.io/nyschooldata/reference/safe_numeric.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert to numeric, handling suppression markers — safe_numeric","text":"x Vector convert","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/safe_numeric.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert to numeric, handling suppression markers — safe_numeric","text":"Numeric vector NA non-numeric values","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/school_year_label.html","id":null,"dir":"Reference","previous_headings":"","what":"School Year Label — school_year_label","title":"School Year Label — school_year_label","text":"Converts end year integer school year label string.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/school_year_label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"School Year Label — school_year_label","text":"","code":"school_year_label(end_year)"},{"path":"https://almartin82.github.io/nyschooldata/reference/school_year_label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"School Year Label — school_year_label","text":"end_year Integer end year (e.g., 2024)","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/school_year_label.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"School Year Label — school_year_label","text":"Character school year label (e.g., \"2023-24\")","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/school_year_label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"School Year Label — school_year_label","text":"","code":"school_year_label(2024)  # Returns \"2023-24\" #> [1] \"2023-24\" school_year_label(2021)  # Returns \"2020-21\" #> [1] \"2020-21\""},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_archive_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize column names from archive format (1977-2011) — standardize_archive_columns","title":"Standardize column names from archive format (1977-2011) — standardize_archive_columns","text":"Maps archive column names modern format consistent processing.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_archive_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize column names from archive format (1977-2011) — standardize_archive_columns","text":"","code":"standardize_archive_columns(df)"},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_archive_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize column names from archive format (1977-2011) — standardize_archive_columns","text":"df Data frame archive column names","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_archive_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize column names from archive format (1977-2011) — standardize_archive_columns","text":"Data frame standardized column names","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_legacy_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize column names from legacy format — standardize_legacy_columns","title":"Standardize column names from legacy format — standardize_legacy_columns","text":"Maps legacy column names modern format consistent processing.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_legacy_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize column names from legacy format — standardize_legacy_columns","text":"","code":"standardize_legacy_columns(df)"},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_legacy_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize column names from legacy format — standardize_legacy_columns","text":"df Data frame legacy column names","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/standardize_legacy_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize column names from legacy format — standardize_legacy_columns","text":"Data frame standardized column names","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/tidy_enr.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy enrollment data — tidy_enr","title":"Tidy enrollment data — tidy_enr","text":"Transforms wide enrollment data long format grade_level column. row represents enrollment one school/district, one grade level.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/tidy_enr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tidy enrollment data — tidy_enr","text":"","code":"tidy_enr(df)"},{"path":"https://almartin82.github.io/nyschooldata/reference/tidy_enr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tidy enrollment data — tidy_enr","text":"df wide data.frame processed enrollment data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/tidy_enr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tidy enrollment data — tidy_enr","text":"long data.frame tidied enrollment data","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/validate_beds_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate BEDS code format — validate_beds_code","title":"Validate BEDS code format — validate_beds_code","text":"Checks BEDS code expected 12-digit format.","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/validate_beds_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate BEDS code format — validate_beds_code","text":"","code":"validate_beds_code(beds_code)"},{"path":"https://almartin82.github.io/nyschooldata/reference/validate_beds_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate BEDS code format — validate_beds_code","text":"beds_code Character vector BEDS codes","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/validate_beds_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate BEDS code format — validate_beds_code","text":"Logical vector indicating valid codes","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/validate_beds_code.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate BEDS code format — validate_beds_code","text":"","code":"validate_beds_code(c(\"010100010018\", \"31000001023\", \"invalid\")) #> [1]  TRUE FALSE FALSE"},{"path":"https://almartin82.github.io/nyschooldata/reference/write_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Write data to cache — write_cache","title":"Write data to cache — write_cache","text":"Write data cache","code":""},{"path":"https://almartin82.github.io/nyschooldata/reference/write_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write data to cache — write_cache","text":"","code":"write_cache(data, end_year, type = \"raw\")"},{"path":"https://almartin82.github.io/nyschooldata/reference/write_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write data to cache — write_cache","text":"data Data frame cache end_year School year end type File type","code":""}]
